
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
 <channel>
   <title>Categories on Paradigm X</title>
   <link>/categories/</link>
   <description>Recent content in Categories on Paradigm X</description>
   <generator>Hugo -- gohugo.io</generator>
   <language>en-us</language>
   <copyright>Copyright &amp;copy; 2022 - Neo Lee</copyright>
   
       <atom:link href="/categories/index.xml" rel="self" type="application/rss+xml" />
   
   
     <item>
       <title>Clojure Toolchain Reloaded</title>
       <link>/posts/clojure-toolchain-reloaded/</link>
       <pubDate>Mon, 01 Apr 2013 23:45:00 +0800</pubDate>
       
       <guid>/posts/clojure-toolchain-reloaded/</guid>
       <description>&lt;p&gt;&lt;a href=&#34;http://clojure.org&#34;&gt;Clojure&lt;/a&gt; keeps &lt;a href=&#34;http://wit.io/posts/clojure-all-grown-up&#34;&gt;growning up&lt;/a&gt;, and my 2.5-years old &lt;a href=&#34;http://7thgen.info/blog/2010/12/clojure-for-mac-os-x/&#34;&gt;guide for setting up Clojure environment on Mac OS X&lt;/a&gt; had been out-of-date for quite a while. The toolchains based on &lt;a href=&#34;https://github.com/technomancy/leiningen&#34;&gt;Leiningen 2&lt;/a&gt; and &lt;a href=&#34;https://github.com/clojure/tools.nrepl&#34;&gt;nREPL&lt;/a&gt; rise from underground, become really powerful and easy (even joyful for most of us) to use, and de facto standard. Nearly all main stream developing environments provide solutions for serious Clojure developers: &lt;a href=&#34;http://eclipse.org&#34;&gt;Eclipse&lt;/a&gt; + &lt;a href=&#34;http://code.google.com/p/counterclockwise/&#34;&gt;Counter Clockwise&lt;/a&gt;, &lt;a href=&#34;http://www.jetbrains.com/idea/&#34;&gt;IntelliJ IDEA&lt;/a&gt; + &lt;a href=&#34;http://www.jetbrains.com/idea/&#34;&gt;La Clojure&lt;/a&gt;, &lt;a href=&#34;http://www.sublimetext.com/2&#34;&gt;Sublime Text 2&lt;/a&gt; + &lt;a href=&#34;http://github.com/wuub/SublimeREPL&#34;&gt;SublimeREPL&lt;/a&gt;, Vim with &lt;a href=&#34;http://clojure-doc.org/articles/tutorials/vim_fireplace.html&#34;&gt;fireplace.vim&lt;/a&gt;, etc.&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;, and the favorite I finally found several months ago, &lt;a href=&#34;https://github.com/overtone/emacs-live&#34;&gt;Emacs Live&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;&lt;em&gt;Emacs Live&lt;/em&gt; is brought to us by &lt;a href=&#34;https://github.com/samaaron&#34;&gt;Sam Aaron&lt;/a&gt;, a major developer of &lt;a href=&#34;https://github.com/overtone/overtone/&#34;&gt;Overtone&lt;/a&gt;, the Clojure-based open source live-programmable music exploration &amp;amp; collaboration toolkit&lt;sup id=&#34;fnref:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;. From &lt;em&gt;Emacs Live&lt;/em&gt; documentation:&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;Emacs Live is a carefully curated Emacs config which transforms vanilla Emacs from simply an incredible editor into an intense experience. The key is in the curation. Unlike other exemplary Emacs config tools such as the Starter Kit and Prelude which are very modular, Emacs Live embodies a holistic approach creating an all-round package. We build on the shoulders of giants and incorporate many independent projects, ensuring that they all work together seamlessly.&lt;/p&gt;&lt;p&gt;&amp;ndash; &lt;em&gt;Emacs Live &lt;a href=&#34;http://overtone.github.com/emacs-live/&#34;&gt;A curated Emacs experience&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;em&gt;Emacs Live&lt;/em&gt; emphasizes the &lt;em&gt;curation&lt;/em&gt; of the whole bundle, providing great experiences for out-of-box usage. Some of the best features it packs include:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Solid configuration for fundamental Emacs usage, especially Paredit&lt;sup id=&#34;fnref:3&#34;&gt;&lt;a href=&#34;#fn:3&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;3&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt;&lt;li&gt;Well picked and configured Clojure toolkit:&lt;ul&gt;&lt;li&gt;With Leiningen as the only dependency, without cluttered configuration files which normal IDEs usually introduce&lt;/li&gt;&lt;li&gt;Built-in &lt;a href=&#34;https://github.com/kingtim/nrepl.el&#34;&gt;nREPL.el&lt;/a&gt; for communicating with nREPL servers&lt;/li&gt;&lt;li&gt;Clojure Mode with fancy (λ a) and ƒ(+ % 5) prettifications&lt;/li&gt;&lt;li&gt;Auto completion support for both Clojure and nREPL buffer with inline documentation display (see it in action below)&lt;/li&gt;&lt;li&gt;Fancy highlighting of sexps on eval; rainbow parens and delimiters&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;Amazing powerful features like: &lt;a href=&#34;http://www.emacswiki.org/emacs/UndoTree&#34;&gt;undo-tree&lt;/a&gt;, Textmate-like snippets, &lt;a href=&#34;http://www.emacswiki.org/emacs/quick-jump.el&#34;&gt;quick jump&lt;/a&gt; and &lt;a href=&#34;http://www.emacswiki.org/emacs/AceJump&#34;&gt;Ace Jump&lt;/a&gt; mode&lt;/li&gt;&lt;/ul&gt;&lt;figure class=&#34;mid&#34;&gt;&lt;img src=&#34;/images/posts/emacs-live.png&#34;/&gt;&lt;figcaption&gt;            &lt;h4&gt;My custom Emacs Live in working&lt;/h4&gt;        &lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;em&gt;Emacs Live&lt;/em&gt; also provides modular customization mechanism called &lt;em&gt;packs&lt;/em&gt;. As you can see in the above screenshot, I don&amp;rsquo;t like the font and color theme bundled with Emacs Live so I use my favorite &lt;a href=&#34;http://www.fsd.it/fonts/pragmatapro.htm&#34;&gt;Pragmata Pro coding font&lt;/a&gt; and &lt;a href=&#34;http://ethanschoonover.com/solarized&#34;&gt;Solarized color theme&lt;/a&gt;. For people who like a really powerful yet beautiful and elegant developing environment for Clojure, I&amp;rsquo;ll describe below how I set up all on Mac OS X in half an hour, step by step.&lt;/p&gt;&lt;h2 id=&#34;pre-requisites&#34;&gt;Pre-requisites&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;OS&lt;/strong&gt;: Mac OS X 10.6 or above&lt;br&gt;&lt;strong&gt;Java VM&lt;/strong&gt;: Java SDK 6 or later&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;% uname -a&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Darwin matrix.local 12.3.0 Darwin Kernel Version 12.3.0: Sun Jan  &lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt; 22:37:10 PST 2013; root:xnu-2050.22.13~1/RELEASE_X86_64 x86_64&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;% java -version&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;java version &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;1.6.0_43&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Java&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;TM&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; SE Runtime Environment &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;build 1.6.0_43-b01-447-11M4203&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Java HotSpot&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;TM&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; 64-Bit Server VM &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;build 20.14-b01-447, mixed mode&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;emacs&#34;&gt;Emacs&lt;/h3&gt;&lt;p&gt;&lt;em&gt;Emacs Live&lt;/em&gt; needs vanilla Emacs 24 or above. Which you can get in one of these methods:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Download pre-built universal binary from &lt;a href=&#34;http://emacsformacosx.com&#34;&gt;emacsformacosx.com&lt;/a&gt;, mount the image and copy Emacs.app to &lt;code&gt;/Applications&lt;/code&gt;.&lt;/li&gt;&lt;li&gt;Use &lt;a href=&#34;http://mxcl.github.com/homebrew/&#34;&gt;Homebrew&lt;/a&gt;, the best package manager for OS X. It&amp;rsquo;s as simple as &lt;code&gt;brew install emacs --cocoa&lt;/code&gt;.&lt;/li&gt;&lt;li&gt;Download source from GNU Emacs site and build it:&lt;/li&gt;&lt;/ul&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;bzr branch http://bzr.savannah.gnu.org/r/emacs/trunk&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cd trunk&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./autogen.sh&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./configure --with-ns&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make bootstrap &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; make install&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mv nextstep/Emacs.app /Applications&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;leiningen&#34;&gt;Leiningen&lt;/h3&gt;&lt;p&gt;&lt;em&gt;Leiningen is for automating Clojure projects without setting your hair on fire.&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;Emacs Live&lt;/em&gt; depends on &lt;em&gt;Leiningen 2&lt;/em&gt;. The best way to get &lt;a href=&#34;https://github.com/technomancy/leiningen&#34;&gt;Leiningen&lt;/a&gt; on board is, again, to use &lt;a href=&#34;http://mxcl.github.com/homebrew/&#34;&gt;Homebrew&lt;/a&gt; &lt;code&gt;brew install leiningen&lt;/code&gt;.&lt;/p&gt;&lt;p&gt;Of course the &lt;a href=&#34;https://github.com/technomancy/leiningen&#34;&gt;official method&lt;/a&gt; should work fine too:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;a href=&#34;https://raw.github.com/technomancy/leiningen/stable/bin/lein&#34;&gt;Download the script&lt;/a&gt;.&lt;/li&gt;&lt;li&gt;Place it on your $PATH e.g. &lt;code&gt;~/bin&lt;/code&gt; or &lt;code&gt;/usr/local/bin&lt;/code&gt;&lt;/li&gt;&lt;li&gt;Set it to be executable e.g. &lt;code&gt;chmod 755 ~/bin/lein&lt;/code&gt; or &lt;code&gt;chmod 755 /usr/local/bin/lein&lt;/code&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;Either way you can verify it by issuing&lt;sup id=&#34;fnref:4&#34;&gt;&lt;a href=&#34;#fn:4&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;4&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;% lein -v&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Leiningen 2.1.2 on Java 1.6.0_43 Java HotSpot&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;TM&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; 64-Bit Server VM&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;cleanup&#34;&gt;Cleanup&lt;/h3&gt;&lt;p&gt;If you are already Emacs user, which means that most likely you already have an &lt;code&gt;.emacs&lt;/code&gt; config file and lots of stuff in &lt;code&gt;.emacs.d&lt;/code&gt; folder under your home &lt;code&gt;~/&lt;/code&gt;. In this case before going any further you have to backup all of them for later use.&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mkdir -p ~/Desktop/Emacs.backup&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mv ~/.emacs ~/.emacs.d ~/Desktop/Emacs.backup&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;emacs-live&#34;&gt;Emacs Live&lt;/h2&gt;&lt;p&gt;There are several methods to install &lt;em&gt;Emacs Live&lt;/em&gt;. But here is my favorite:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cd ~/&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git clone git://github.com/overtone/emacs-live.git ~/.emacs.d&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;That&amp;rsquo;s it. Now you can try it by simply launching &lt;code&gt;Emacs.app&lt;/code&gt; from your &lt;code&gt;/Applications&lt;/code&gt; folder. You&amp;rsquo;d better not touch the &lt;code&gt;~/.emacs.d&lt;/code&gt; folder from now on, so you can update &lt;em&gt;Emacs Live&lt;/em&gt; anytime you want by issuing &lt;code&gt;git pull&lt;/code&gt; in this folder.&lt;/p&gt;&lt;p&gt;All following steps are for more customization, and &lt;em&gt;optional&lt;/em&gt;.&lt;/p&gt;&lt;h2 id=&#34;emacs-live-customization&#34;&gt;Emacs Live Customization&lt;/h2&gt;&lt;h3 id=&#34;create-custom-user-pack&#34;&gt;Create Custom User Pack&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mkdir ~/.live-packs&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cp -R ~/.emacs.d/packs/template/user-template-pack ~/.live-packs/yourname-pack&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The folder name &lt;code&gt;yourname-pack&lt;/code&gt; can be anything you&amp;rsquo;d like. Mine is &lt;code&gt;neo-pack&lt;/code&gt; and you can have it as reference on &lt;a href=&#34;https://github.com/neolee/neo-pack&#34;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;&lt;h3 id=&#34;user-pack-structure&#34;&gt;User Pack Structure&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;config&lt;/code&gt;: Folder for Emacs config files. Typically a &lt;code&gt;bindings.el&lt;/code&gt; for keybindings (which is already there), and a &lt;code&gt;yourname-conf.el&lt;/code&gt; for your custom setting (which is not exist by default). I created a &lt;code&gt;config/neo-conf.el&lt;/code&gt; and imported most of my settings from the old &lt;code&gt;~/.emacs&lt;/code&gt; file, which you can find &lt;a href=&#34;https://github.com/neolee/neo-pack/blob/master/config/neo-conf.el&#34;&gt;here&lt;/a&gt;.&lt;/li&gt;&lt;li&gt;&lt;code&gt;lib&lt;/code&gt;: Folder for Emacs mods. Put stuffs from old &lt;code&gt;.emacs.d&lt;/code&gt; folder into it and load them like this (in &lt;code&gt;init.el&lt;/code&gt; or any scripts under &lt;code&gt;config&lt;/code&gt; folder):&lt;/li&gt;&lt;/ul&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-clojure&#34; data-lang=&#34;clojure&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;live-add-pack-lib&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;some-great-mod&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;; some-great-mod is sub-folder under lib folder&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;require&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;great-mod-init&lt;/span&gt;)            &lt;span style=&#34;color:#75715e&#34;&gt;; great-mod-init.el is script under sub-folder some-great-mod&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;great-mod&lt;/span&gt;)                          &lt;span style=&#34;color:#75715e&#34;&gt;; great-mod is some function in great-mod-init.el&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;init.el&lt;/code&gt;: Entry script of the pack. Mostly something like:&lt;/li&gt;&lt;/ul&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-clojure&#34; data-lang=&#34;clojure&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;;; Load bindings config&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;live-load-config-file&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;bindings.el&amp;#34;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;;; Custom settings&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;live-load-config-file&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;yourname-conf.el&amp;#34;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;info.el&lt;/code&gt;: Meta data of the user pack.&lt;/li&gt;&lt;li&gt;&lt;code&gt;README.md&lt;/code&gt;: Helpful info for user pack customization.&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&#34;import-3rd-party-pack&#34;&gt;Import 3rd Party Pack&lt;/h3&gt;&lt;p&gt;The built-in &lt;code&gt;cyberpunk&lt;/code&gt; color theme bundled with &lt;em&gt;Emacs Live&lt;/em&gt; is amazing, but I love the epic Solarized color theme all the time. Fortunately an &lt;em&gt;Emacs Live&lt;/em&gt; user has made a &lt;a href=&#34;https://github.com/siancu/solarized-pack&#34;&gt;reusable pack&lt;/a&gt; for it&lt;sup id=&#34;fnref:5&#34;&gt;&lt;a href=&#34;#fn:5&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;5&lt;/a&gt;&lt;/sup&gt;. Simply import it from GitHub:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cd ~/.live-packs&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git clone git://github.com/siancu/solarized-pack.git&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cd solarized-pack&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git submodule init&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git submodule update&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;tell-emacs-to-load-user-packs&#34;&gt;Tell Emacs to Load User Packs&lt;/h3&gt;&lt;p&gt;&lt;em&gt;Emacs Live&lt;/em&gt; uses &lt;code&gt;~/.emacs-live.el&lt;/code&gt; to load user packs. So we need to create a &lt;code&gt;~/.emacs-live.el&lt;/code&gt; file and put these lines in it:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-clojure&#34; data-lang=&#34;clojure&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;live-use-packs&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#39;&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;live/foundation-pack&lt;/span&gt;     &lt;span style=&#34;color:#75715e&#34;&gt;; Use live-use-packs to control which built-in packs should be loaded&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                  &lt;span style=&#34;color:#75715e&#34;&gt;; live/colour-pack       ; This built-in pack MUST be disabled if you want to use 3rd party color theme pack&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                  live/clojure-pack&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                  live/lang-pack&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                  live/power-pack))&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;live-add-packs&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#39;&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;~&lt;/span&gt;/.live-packs/neo-pack   &lt;span style=&#34;color:#75715e&#34;&gt;; Use live-add-packs to load custom packs&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                  &lt;span style=&#34;color:#f92672&#34;&gt;~&lt;/span&gt;/.live-packs/solarized-pack))&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;final-tweaks&#34;&gt;Final Tweaks&lt;/h2&gt;&lt;h3 id=&#34;emacs-launching-time&#34;&gt;Emacs Launching Time&lt;/h3&gt;&lt;p&gt;&lt;em&gt;Emacs Live&lt;/em&gt; is extremely powerful and thus cause rather long Emacs starting time as trade-off. Fortunately Emacs has standard solution for this problem: the Emacs daemon and &lt;code&gt;emacsclient&lt;/code&gt;. Just add these aliases in your shell startup script (e.g. my &lt;code&gt;~/.zshrc&lt;/code&gt;):&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;alias es&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/Applications/Emacs.app/Contents/MacOS/Emacs --daemon&amp;#39;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;alias emacs&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/Applications/Emacs.app/Contents/MacOS/bin/emacsclient -c -n&amp;#39;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Then you can firstly launch the Emacs server daemon by issuing &lt;code&gt;es&lt;/code&gt; in shell (only once), after which you can instantly open Emacs editor by &lt;code&gt;emacs &amp;lt;filename&amp;gt;&lt;/code&gt;.&lt;/p&gt;&lt;h3 id=&#34;connecting-to-nrepl&#34;&gt;Connecting to nREPL&lt;/h3&gt;&lt;p&gt;&lt;em&gt;Emacs Live&lt;/em&gt; provides &lt;em&gt;nREPL&lt;/em&gt; integration through &lt;code&gt;nrepl.el&lt;/code&gt;. To use that you can choose one of two ways.&lt;/p&gt;&lt;h4 id=&#34;jacking-in&#34;&gt;Jacking In&lt;/h4&gt;&lt;p&gt;The simplest way to get &lt;em&gt;Emacs Live&lt;/em&gt; connected with a Clojure process is to use &lt;code&gt;M-x nrepl-jack-in&lt;/code&gt; command. This allows you to connect to a specific &lt;em&gt;Leiningen&lt;/em&gt; project which therefore ensures that all the project dependencies defined in the project’s &lt;code&gt;project.clj&lt;/code&gt; are available on the JVM classpath.&lt;/p&gt;&lt;p&gt;In order to communicate with the correct project, you should summon &lt;code&gt;M-x nrepl-jack-in&lt;/code&gt; whilst the active buffer displaying file which is part of the &lt;em&gt;Leiningen&lt;/em&gt; project you wish to connect to. This will then spawn &lt;code&gt;lein repl :headless&lt;/code&gt; as an external shell process and automatically connect to it.&lt;/p&gt;&lt;h4 id=&#34;manually-connection&#34;&gt;Manually Connection&lt;/h4&gt;&lt;p&gt;Another option for connecting to an &lt;em&gt;nREPL&lt;/em&gt; process is to manually start a &lt;em&gt;Leiningen&lt;/em&gt; REPL by &lt;code&gt;cd&lt;/code&gt;ing to the project folder and issuing the command &lt;code&gt;lein repl&lt;/code&gt;. This will start a REPL on the terminal, but also tell you which port &lt;em&gt;nREPL&lt;/em&gt; is listening on i.e.:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;nREPL server started on port &lt;span style=&#34;color:#ae81ff&#34;&gt;62132&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Then use &lt;code&gt;M-x nrepl&lt;/code&gt; command in Emacs and feed it with &lt;code&gt;127.0.0.1&lt;/code&gt; (default) host and &lt;em&gt;right&lt;/em&gt; port, which should have been printed in the shell output of &lt;code&gt;lein repl&lt;/code&gt; command. In the case shown above the &lt;em&gt;right&lt;/em&gt; port is 62132. Soon you will get annoyed by looking for this random port number and paste it to Emacs &lt;code&gt;M-x nrepl&lt;/code&gt; prompt. Fortunately we can ask the nREPL server to listen to the default 4555 port by adding a custom &lt;code&gt;lein&lt;/code&gt; command in &lt;code&gt;~/.lein/profiles.clj&lt;/code&gt;:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-clojure&#34; data-lang=&#34;clojure&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&lt;span style=&#34;color:#e6db74&#34;&gt;:live-repl&lt;/span&gt; {&lt;span style=&#34;color:#e6db74&#34;&gt;:repl-options&lt;/span&gt; {&lt;span style=&#34;color:#e6db74&#34;&gt;:port&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;4555&lt;/span&gt;}}&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;:user&lt;/span&gt; {&lt;span style=&#34;color:#e6db74&#34;&gt;:aliases&lt;/span&gt; {&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;live&amp;#34;&lt;/span&gt; [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;with-profile&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;default,live-repl&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;repl&amp;#34;&lt;/span&gt;]}&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#e6db74&#34;&gt;:dependencies&lt;/span&gt; [...]}&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; }&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now you can issue &lt;code&gt;lein live&lt;/code&gt; command under the project folder, which will start a normal &lt;em&gt;nREPL&lt;/em&gt; session, but this time it will always be listening on port 4555. Connecting from Emacs is now just a matter of &lt;code&gt;M-x nrepl RET RET&lt;/code&gt;.&lt;/p&gt;&lt;h2 id=&#34;faq&#34;&gt;FAQ&lt;/h2&gt;&lt;p&gt;&lt;em&gt;Emacs Live&lt;/em&gt; is being very actively developed and with relatively little &lt;a href=&#34;http://overtone.github.com/emacs-live/documentation.html&#34;&gt;documentation&lt;/a&gt;. Here are some tricks I used in my pack, which may be updated from time to time.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Q: Why is my custom color theme overrided by Emacs Live built-in theme?&lt;/strong&gt;&lt;br&gt;A: You have to disable the built-in &lt;code&gt;live/colour-pack&lt;/code&gt; to use custom color theme, as shown in the &lt;em&gt;Tell Emacs to Load User Packs&lt;/em&gt; section above.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Q: How to use my favorite font instead of the default one?&lt;/strong&gt;&lt;br&gt;A: Modify &lt;code&gt;default-frame-alist&lt;/code&gt; in &lt;code&gt;conf/yourname-conf.el&lt;/code&gt; under your user pack (&lt;code&gt;~/.live-packs/yourname-pack&lt;/code&gt;):&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-clojure&#34; data-lang=&#34;clojure&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;add-to-list&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;default-frame-alist&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#39;&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;font&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;. &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;PragmataPro 14&amp;#34;&lt;/span&gt;))&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Q: How to customize my cursor color?&lt;/strong&gt;&lt;br&gt;A: Modify &lt;code&gt;default-frame-alist&lt;/code&gt; in &lt;code&gt;conf/yourname-conf.el&lt;/code&gt; under your user pack:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-clojure&#34; data-lang=&#34;clojure&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;add-to-list&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;default-frame-alist&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#39;&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;cursor-color&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;. &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;palegoldenrod&amp;#34;&lt;/span&gt;))&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Q: I want the highlight current line feature back!&lt;/strong&gt;&lt;br&gt;A: After disabling the built-in &lt;code&gt;live/colour-pack&lt;/code&gt; (see the first question above) you will lose the &lt;em&gt;highlight current line&lt;/em&gt; feature as a side effect (since it&amp;rsquo;s defined in that pack). But it&amp;rsquo;s very easy to add it back, by adding the following line to &lt;code&gt;conf/yourname-conf.el&lt;/code&gt; under your user pack:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-clojure&#34; data-lang=&#34;clojure&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;global-hl-line-mode&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;&lt;hr&gt;&lt;ol&gt;&lt;li id=&#34;fn:1&#34;&gt;&lt;p&gt;See the &lt;a href=&#34;http://dev.clojure.org/display/doc/Getting+Started&#34;&gt;Getting Started&lt;/a&gt; guide in the official dev wiki for more. But note that many info in it are deprecated (e.g. Netbeans and Enclojure, Swank Clojure for Emacs, VimClojure, etc.).&amp;#160;&lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li id=&#34;fn:2&#34;&gt;&lt;p&gt;Overtone is extremely amazing and I highly suggest to have a try. Or you can see the &lt;a href=&#34;http://vimeo.com/22798433&#34;&gt;video&lt;/a&gt; (Emacs Live in action!) to get some idea.&amp;#160;&lt;a href=&#34;#fnref:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li id=&#34;fn:3&#34;&gt;&lt;p&gt;IMHO, &lt;a href=&#34;http://emacswiki.org/emacs/ParEdit&#34;&gt;Paredit&lt;/a&gt; is one of the key reasons which makes Emacs the best editor for all LISP dialects. See this &lt;a href=&#34;http://www.slideshare.net/mudphone/paredit-preso&#34;&gt;perfect guide&lt;/a&gt; if not familiar with paredit.el.&amp;#160;&lt;a href=&#34;#fnref:3&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li id=&#34;fn:4&#34;&gt;&lt;p&gt;If choosing the official method while running &lt;code&gt;lein -v&lt;/code&gt; the first time it will download all dependencies for Leiningen, and then print out the version info.&amp;#160;&lt;a href=&#34;#fnref:4&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li id=&#34;fn:5&#34;&gt;&lt;p&gt;Studying this simple user pack example can make building your own pack, especially color-theme pack as easily as Copy and Paste.&amp;#160;&lt;a href=&#34;#fnref:5&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;</description>
     </item>
   
     <item>
       <title>iOS 7</title>
       <link>/posts/ios-7/</link>
       <pubDate>Tue, 29 Jan 2013 23:55:00 +0800</pubDate>
       
       <guid>/posts/ios-7/</guid>
       <description>&lt;p&gt;In my opinion, the major tasks for Apple this year are all about software, especially in the iOS eco-system.&lt;/p&gt;&lt;p&gt;iOS has very solid Unix foundation and decent application framework. For a long time iOS had incontrovertible advantages over its rivals: performance, security, smooth user interaction, etc., most of which are still advantages today. But we all know that some incapabilities in iOS, especially compared to Android, are becoming more and more important aspects that Apple cannot ignore. Consider the following facts: Android may not be rendering the UI animation as smoothly as iOS always does, but it&amp;rsquo;s been getting better and better since Android 4.0, while iOS still doesn&amp;rsquo;t allow third-party apps customize the lock screen or put widgets on any part of the main UI. See the difference? Android&amp;rsquo;s problems are &amp;rsquo;not as good as iOS&amp;rsquo; and iOS has some &lt;em&gt;incapabilities&lt;/em&gt;. If Apple want more people to choose iOS it should persuade the swing people (not the fans) that &lt;em&gt;iOS is better in all aspects&lt;/em&gt;. It&amp;rsquo;s a prerequisite to eliminate those incapabilities ASAP.&lt;/p&gt;&lt;p&gt;Ars Technica &lt;a href=&#34;http://arstechnica.com/apple/2013/01/bring-us-the-features-an-ars-staff-wish-list-for-ios-7/&#34;&gt;posted their staff wish list for iOS 7&lt;/a&gt; last week. Most features in their list are &lt;em&gt;good&lt;/em&gt; ones but not the &lt;em&gt;critical&lt;/em&gt; ones. Base on the above &lt;em&gt;eliminating incapabilities&lt;/em&gt; theory I&amp;rsquo;ll list mine below, divided to developer and user categories.&lt;/p&gt;&lt;h2 id=&#34;wish-list-as-a-developer&#34;&gt;Wish List as a Developer&lt;/h2&gt;&lt;h3 id=&#34;1-inter-app-communication&#34;&gt;1. Inter-app Communication&lt;/h3&gt;&lt;figure class=&#34;floatleft&#34;&gt;&lt;img src=&#34;/images/posts/ios-7/cameraplus.png&#34; width=&#34;180&#34;/&gt;&lt;figcaption&gt;            &lt;h4&gt;Calling Camera&amp;#43; from Tweetbot&lt;/h4&gt;        &lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;Cocoa provides very powerful and elegant inter-process communication solution on Mac OS X: &lt;code&gt;NSDistributedNotificationCenter&lt;/code&gt; and &lt;code&gt;NSPortNameServer&lt;/code&gt;, but none is available on iOS (for third-party apps at least). &lt;a href=&#34;http://api.camerapl.us/app-api&#34;&gt;Inspired by&lt;/a&gt; the popular photography app Camera+, many apps use shared system clipboard and &lt;a href=&#34;http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW50&#34;&gt;custom URL schemes&lt;/a&gt; to &lt;em&gt;simulate&lt;/em&gt; a cross-app call with custom data. Following this approach Apple can easily develop a secure, simple but powerful solution.&lt;/p&gt;&lt;figure class=&#34;floatright&#34;&gt;&lt;img src=&#34;/images/posts/ios-7/share-panels.jpg&#34; width=&#34;240&#34;/&gt;&lt;figcaption&gt;            &lt;h4&gt;Share Panel in iOS and Android&lt;/h4&gt;        &lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;The &lt;a href=&#34;http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivityViewController_Class/Reference/Reference.html#//apple_ref/occ/cl/UIActivityViewController&#34;&gt;UIActivityViewController&lt;/a&gt; API introduced in iOS 6 is a high level interface for inter-app data sharing. It&amp;rsquo;s similar to Android&amp;rsquo;s &amp;ldquo;Share&amp;hellip;via&amp;rdquo; interface, but not allow third-party apps to add system level services (app level services are allowed, see this &lt;a href=&#34;http://stackoverflow.com/questions/12546574/using-apple-icons-with-ios-6&#34;&gt;StackOverflow question&lt;/a&gt; for details). This is another improvement opportunity for Apple.&lt;/p&gt;&lt;h3 id=&#34;2-widget-api&#34;&gt;2. Widget API&lt;/h3&gt;&lt;p&gt;Widgets may bring trouble (drained battery, inconsistent user interaction, etc.) but still useful and sometimes very attractive. There are several parts of iOS&amp;rsquo;s system UI that are calling for custom widgets: the lock screen, the notification center, and the multitasking bar (actually we already have some &lt;a href=&#34;http://www.theverge.com/2012/10/4/3451322/rethinking-the-app-switcher-for-the-iphone-5-mockups&#34;&gt;impressive mockup&lt;/a&gt; for this one).&lt;/p&gt;&lt;p&gt;For now all these UI parts are running inside the Springboard process. Apple must move them into independent processes before allowing third-party widgets running within them. Then Apple should push some strict guideline for widget development (just like multitasking). Finally open a front page section in the App Store and Boom! Everybody will be happy with it.&lt;/p&gt;&lt;figure class=&#34;floatright&#34;&gt;&lt;img src=&#34;/images/posts/ios-7/widgets.jpg&#34; width=&#34;240&#34;/&gt;&lt;figcaption&gt;            &lt;h4&gt;iOS Widgets?&lt;/h4&gt;        &lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 id=&#34;3-siri-api&#34;&gt;3. Siri API&lt;/h3&gt;&lt;p&gt;This one is easy to describe: open APIs of Siri, let us develop plugins for Siri and make her a real goddess. Third-party apps can facilitate Siri&amp;rsquo;s advanced voice recognition and text-to-speech engine, response to Siri commands and integrate content into Siri&amp;rsquo;s search result. It will bring a whole new world in.&lt;/p&gt;&lt;p&gt;###4 . A Better App Store&lt;/p&gt;&lt;p&gt;App Store is good, App Store changed the world, App Store brings money to the happy developers. But App Store desperately needs these (thank &lt;a href=&#34;https://twitter.com/GossipSama&#34;&gt;@GossipSama&lt;/a&gt; for insightful addition):&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Incremental update for apps&lt;/strong&gt;. Enough said.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Better IAP flow&lt;/strong&gt;. The standard flow today is fragile: app connect to iTunes to let user purchase; app connect to its own server to log the purchased token; app server connect to Apple&amp;rsquo;s IAP server for verification; etc. If user quits app during some steps or app server fails on IAP server, the transaction will fail and may leave incomplete state in the system. A one step server-to-server workflow will be life changer for developers who highly rely on the IAP mechanism.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Account statement&lt;/strong&gt;. Developers need detail account statements for many reasons: fix failed payments, find cheating users, etc.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;App promoting policy&lt;/strong&gt;. Developers need more transparency on app recommendation and sorting mechanism, and a clean policy for app promoting (can and cannot do, good and evil behaviors and so on).&lt;/li&gt;&lt;/ul&gt;&lt;h2 id=&#34;wish-list-as-a-user&#34;&gt;Wish List as a User&lt;/h2&gt;&lt;p&gt;First of all, most features listed in the previous part can extremely benefit all users. Users will get a shiny new iOS with powerful new features like:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Bluetooth/WiFi/3G/Screen Rotation Lock toggles right in the multitasking bar.&lt;/li&gt;&lt;li&gt;Event and weather display in the lock screen.&lt;/li&gt;&lt;li&gt;Sending any link from any apps to Instapaper (even the apps without builtin support for Instapaper).&lt;/li&gt;&lt;li&gt;Beautiful, secure, reliable widgets in App Store to customize iOS.&lt;/li&gt;&lt;li&gt;Much more apps in the App Store with Siri integration.&lt;/li&gt;&lt;li&gt;Faster app updating and more robust IAP purchase.&lt;/li&gt;&lt;li&gt;More easily to find good apps.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Beside these we also have the following:&lt;/p&gt;&lt;h3 id=&#34;1-itunes-account-merge&#34;&gt;1. iTunes Account Merge&lt;/h3&gt;&lt;p&gt;If you have more than one iTunes account (e.g. Japanese have many exclusive, excellent music and games!) you are in trouble. You have to manually log off and log on to each of your accounts to check app updates. And when you want to do some IAP you have to confirm (manually again) that you are currently logged on to the account from which you originally bought the app.&lt;/p&gt;&lt;p&gt;iOS and iTunes should make it better.&lt;/p&gt;&lt;h3 id=&#34;2-better-arranged-system-setting&#34;&gt;2. Better Arranged System Setting&lt;/h3&gt;&lt;p&gt;Tell me where is the Auto-Lock setting in 5 seconds. Can you do that? Yes? And how to turn off iCloud sync for document and iTunes Match under cellular network, huh?&lt;/p&gt;&lt;h3 id=&#34;3-more-useful-gestures&#34;&gt;3. More Useful Gestures&lt;/h3&gt;&lt;p&gt;&lt;a href=&#34;http://gigaom.com/2012/04/02/how-to-use-ipad-multitasking-gestures-and-why-you-should/&#34;&gt;Multitasking Gestures&lt;/a&gt; on iPad is good, please fine-tune and bring them to iPhone. Further more, Apple should seriously consider the jailbreak system add-on Activator and bring more useful gestures to iOS. So people can forget the ugly AssistiveTouch button.&lt;/p&gt;&lt;h3 id=&#34;4-multiple-user-profiles-on-a-device&#34;&gt;4. Multiple User Profiles on a Device&lt;/h3&gt;&lt;p&gt;Sharing iPad in a family is very common. By supporting multiple profile and user switch the children will have more chance to use the iDevice, and more likely buy their own sooner or later.&lt;/p&gt;&lt;p&gt;So what do you think? Share your wishes in the comment!&lt;/p&gt;</description>
     </item>
   
     <item>
       <title>A Brief Guide of (RESTful) SOA, Part III</title>
       <link>/posts/a-brief-guide-of-soa-p3/</link>
       <pubDate>Thu, 18 Oct 2012 15:47:00 +0800</pubDate>
       
       <guid>/posts/a-brief-guide-of-soa-p3/</guid>
       <description>&lt;p&gt;&lt;a href=&#34;/posts/a-brief-guide-of-soa-p1/&#34;&gt;Part I&lt;/a&gt; | &lt;a href=&#34;/posts/a-brief-guide-of-soa-p2/&#34;&gt;Part II&lt;/a&gt;&lt;/p&gt;&lt;p&gt;In the final part of this article we will discuss several common topics of RESTful web service implementation. I will not dig deep here because all these topics are all quite complicated.&lt;/p&gt;&lt;h2 id=&#34;level-iv-restful-service-implementation&#34;&gt;Level IV: RESTful Service Implementation&lt;/h2&gt;&lt;h3 id=&#34;41-reference-architecture&#34;&gt;4.1 Reference Architecture&lt;/h3&gt;&lt;figure class=&#34;mid&#34;&gt;&lt;img src=&#34;/images/posts/restful-service-architecture-01.jpg&#34;/&gt;&lt;figcaption&gt;            &lt;h4&gt;Reference Architecture&lt;/h4&gt;        &lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;The architecture shows several good start points:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Layered system&lt;/strong&gt;: simple but strict layered system gives reusable and loose-coupled architecture. Every layer in this architecture should able to scale independently.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Representation layer&lt;/strong&gt;: a &lt;em&gt;facade&lt;/em&gt; to handle all API requests consistently. Nearly all the common tasks can be centralised here. See section 4.2 below for detail.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;State/transfer layer&lt;/strong&gt;: a mid-tier to contain all business logic, including business object and flow abstraction, and the access layers for all back-end resource.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Resource layer&lt;/strong&gt;: can be any resource used in the system. e.g. platform data (structured or unstructured), external data port, adaptors to other resource APIs, etc.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Caches&lt;/strong&gt;: cache any cacheable things. Design a consistent mechanism to manage the caches.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Workers&lt;/strong&gt;: many things should be handled automatically and asynchronously. Build a job system to schedule and manage all automatic workers.&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&#34;42-facade&#34;&gt;4.2 Facade&lt;/h3&gt;&lt;p&gt;An API facade is a centralised entry for all API requests. Requests are pre-processed here and routed to proper business handlers. Return data are also rendered here, as exactly described in the API specs, and response to the client.&lt;/p&gt;&lt;p&gt;Nearly all the common tasks can be centralised here:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;em&gt;Authentication&lt;/em&gt;, &lt;em&gt;authorisation&lt;/em&gt; and &lt;em&gt;auditing&lt;/em&gt; (3A)&lt;/li&gt;&lt;li&gt;Rate limiting&lt;/li&gt;&lt;li&gt;Parameters parsing and checking&lt;/li&gt;&lt;li&gt;Return data rendering&lt;/li&gt;&lt;li&gt;Statistics and analysis&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;All these tasks are business independent. Actually they are mostly &lt;a href=&#34;http://en.wikipedia.org/wiki/Cross-cutting_concern&#34;&gt;cross-cutting concerns&lt;/a&gt;. For better &lt;a href=&#34;http://en.wikipedia.org/wiki/Separation_of_concerns&#34;&gt;separation of concerns&lt;/a&gt; they should be separated from the main business part and consolidated to a centralised place.&lt;/p&gt;&lt;p&gt;Note that for performance reason some should run asynchronously from the main request/response flow.&lt;/p&gt;&lt;h3 id=&#34;43-scaling&#34;&gt;4.3 Scaling&lt;/h3&gt;&lt;figure class=&#34;mid&#34;&gt;&lt;img src=&#34;/images/posts/restful-service-architecture-05.jpg&#34;/&gt;&lt;figcaption&gt;            &lt;h4&gt;Scaling&lt;/h4&gt;        &lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;A well-designed layer system can guarantee independent scaling per every layer. In the reference architecture:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;The front-end can be horizontally extended by adding a front-end load balancer.&lt;/li&gt;&lt;li&gt;The business logic can be horizontally extended by adding a service router and coordinator. By doing this you can even make some intelligent system to dynamic adjust service load via requests stats.&lt;/li&gt;&lt;li&gt;The data is the hardest part to be extended, especially for traditional RDBMS. But you can use any mature mechanism to make life better: partitioning, sharding, clustering etc. Another very popular solution is to separate some highly active data and put them into Redis (or other NoSQL system).&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Most best practices on Internet-scale services are fully applicable to RESTful services. Just remember to keep an eye on the &lt;a href=&#34;/posts/a-brief-guide-of-soa-p1/&#34;&gt;core principles&lt;/a&gt; of REST all the time.&lt;/p&gt;&lt;h2 id=&#34;extended-readings&#34;&gt;Extended Readings&lt;/h2&gt;&lt;p&gt;RESTful web services are not traditional web sites but they share most characteristic features of Internet software architecture. If you are an architect but new to Internet-scale services architecture James Hamilton&amp;rsquo;s &lt;a href=&#34;http://static.usenix.org/event/lisa07/tech/full_papers/hamilton/hamilton_html/&#34;&gt;classic thesis&lt;/a&gt; is a must-read.&lt;/p&gt;&lt;p&gt;For new software architects this &lt;a href=&#34;http://gorban.org/post/32873465932/software-architecture-cheat-sheet&#34;&gt;cheat sheet&lt;/a&gt; is a good start.&lt;/p&gt;&lt;p&gt;With very similar goal to this 3-parts article, Matt Gemmell has written &lt;a href=&#34;http://mattgemmell.com/2012/05/24/api-design/&#34;&gt;very good guide&lt;/a&gt; for API design and implementation (a little later than my first part). It has very different structure and focus from mine and is definitely another must-read.&lt;/p&gt;</description>
     </item>
   
     <item>
       <title>A Brief Guide of (RESTful) SOA, Part II</title>
       <link>/posts/a-brief-guide-of-soa-p2/</link>
       <pubDate>Wed, 17 Oct 2012 20:53:00 +0800</pubDate>
       
       <guid>/posts/a-brief-guide-of-soa-p2/</guid>
       <description>&lt;p&gt;In the &lt;a href=&#34;/posts/a-brief-guide-of-soa-p1/&#34;&gt;first part of this series&lt;/a&gt; we have discussed the core concepts of RESTful architectural style and gives some guideline in how to define the system and prepare for defining the APIs specs, which will be covered in this part.&lt;/p&gt;&lt;h2 id=&#34;level-iii-define-and-tune-the-api&#34;&gt;Level III: Define and Tune the API&lt;/h2&gt;&lt;p&gt;Defining API specs is the most important part of all and it&amp;rsquo;s a continuous progress in the whole lifecycle, mostly documentation oriented. A simple and neat document collaboration platform is very useful. I suggest facilitating tools such as &lt;a href=&#34;http://www.mediawiki.org/&#34;&gt;MediaWiki&lt;/a&gt; or &lt;a href=&#34;http://daringfireball.net/projects/markdown/&#34;&gt;Markdown&lt;/a&gt; + &lt;a href=&#34;https://github.com&#34;&gt;GitHub&lt;/a&gt; etc. Then you can follow these sections below.&lt;/p&gt;&lt;h3 id=&#34;31-api-basics&#34;&gt;3.1 API Basics&lt;/h3&gt;&lt;p&gt;Use one or two pages to list basic information of the API system, including (but not constrained to):&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;General&lt;/strong&gt;: general style and policy, versioning, request and response methods, i18n, etc.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Authorisation&lt;/strong&gt;: step by step tutorial on connecting to the service (see section 3.2 below).&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Request&lt;/strong&gt;: all acceptable request formats w/ examples.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Response&lt;/strong&gt;: response format w/ examples, error codes.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Misc&lt;/strong&gt;: rate limits, auditing, etc.&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&#34;32-one-token-to-rule-them-all&#34;&gt;3.2 One Token to Rule Them All&lt;/h3&gt;&lt;p&gt;Remember that for most developers using your APIs the most tricky part is the authentication and authorisation. For some reasons (compromise of security, performance and convenience) most web service systems use &lt;code&gt;token&lt;/code&gt; to identify service clients. Here are some fundamental concepts:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Service&lt;/strong&gt;, or the &lt;strong&gt;platform&lt;/strong&gt; is the system hold the key resources and make resources accessible via some open APIs.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Client&lt;/strong&gt;, or &lt;strong&gt;app&lt;/strong&gt; is client application sending request to the &lt;strong&gt;service&lt;/strong&gt;.&lt;/li&gt;&lt;li&gt;Each of every &lt;strong&gt;client&lt;/strong&gt; should &lt;em&gt;register&lt;/em&gt; itself on the &lt;strong&gt;service platform&lt;/strong&gt; and gain a pair of CLIENT_ID and CLIENT_SECRET to identify itself.&lt;/li&gt;&lt;li&gt;After registration &lt;strong&gt;apps&lt;/strong&gt; can request tokens from the &lt;strong&gt;platform&lt;/strong&gt;&lt;/li&gt;&lt;li&gt;There are 2 types of &lt;strong&gt;services&lt;/strong&gt; in most &lt;strong&gt;platform&lt;/strong&gt;: (A) services related to a specific &lt;em&gt;user&lt;/em&gt; in the platform; (B) services independent to &lt;em&gt;users&lt;/em&gt;. They need different kinds of tokens:&lt;ul&gt;&lt;li&gt;For type (A): &lt;strong&gt;app&lt;/strong&gt; should use its CLIENT_ID/CLIENT_SECRET, correlated user&amp;rsquo;s ID and expected access profile (commonly called &amp;lsquo;&lt;em&gt;scope&lt;/em&gt;&amp;rsquo;) to request the access token.&lt;/li&gt;&lt;li&gt;For type (B): &lt;strong&gt;app&lt;/strong&gt; should use its CLIENT_ID/CLIENT_SECRET and &lt;em&gt;scope&lt;/em&gt; to request the access token.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;As long as the access token issued to the &lt;strong&gt;app&lt;/strong&gt;, &lt;strong&gt;app&lt;/strong&gt; can use it to request designated service APIs， until the token expires or revoked by &lt;strong&gt;platform&lt;/strong&gt; or &lt;strong&gt;app&lt;/strong&gt; or the &lt;em&gt;user&lt;/em&gt;.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;In many cases the &lt;strong&gt;platform&lt;/strong&gt; cannot issue type (A) token to an &lt;strong&gt;app&lt;/strong&gt; unless correlated user explicitly approve the request. That&amp;rsquo;s where OAuth-like mechanisms make sense. In such cases, when &lt;strong&gt;platform&lt;/strong&gt; receives request for issuing a token to some user, it will redirect the user to a page showing Approve/Decline buttons and continue the flow after the user explicitly approve the request. For detail info about the widely uses OAuth v2 protocol refer to the official &lt;a href=&#34;http://tools.ietf.org/html/rfc6749&#34;&gt;IETF RFC6749 document&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;A platform should choose mechanism wisely and make the flows (app registration, token issuing/revoking/managing, etc.) clean, flexible and friendly to all potential client apps. Useful tutorials about all these flows are required.&lt;/p&gt;&lt;h3 id=&#34;33-api-taxonomy&#34;&gt;3.3 API Taxonomy&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;An API taxonomy&lt;/strong&gt; can help to organise all APIs. It gives you and your clients&amp;rsquo; developers very clean and structural view of your continuously evolving APIs. It also gives you a way to normalise the API endpoints&amp;rsquo; URI patterns.&lt;/p&gt;&lt;p&gt;API taxonomy is highly dependent to the business. But some general rules certainly helps:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;The response objects, which are defined in the &lt;a href=&#34;/posts/a-brief-guide-of-soa-p1/&#34;&gt;first part&lt;/a&gt; of this article, are usually the &lt;em&gt;first dimension&lt;/em&gt; of the taxonomy.&lt;/li&gt;&lt;li&gt;The &lt;em&gt;second dimension&lt;/em&gt; is usually related to the API URI patterns, which will described below.&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;So let&amp;rsquo;s look at some typical RESTful URI patterns.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Object&lt;/strong&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;/:type&lt;/code&gt; e.g. &lt;code&gt;/user&lt;/code&gt;: Request this URI by &lt;code&gt;POST&lt;/code&gt; will create a new object of designated type and return the object if succeeded.&lt;/li&gt;&lt;li&gt;&lt;code&gt;/:type/:id&lt;/code&gt; e.g. &lt;code&gt;/user/2234&lt;/code&gt;: Request this URI by &lt;code&gt;GET&lt;/code&gt; &lt;code&gt;PUT&lt;/code&gt; &lt;code&gt;DELETE&lt;/code&gt; will fetch, change or delete designated object.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Query&lt;/strong&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;/:type/:catalog&lt;/code&gt; e.g. &lt;code&gt;/user/all&lt;/code&gt; &lt;code&gt;/user/query?name=foo&lt;/code&gt;: Return one or more objects of designated type (using criteria in query string if needed).&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Aspect&lt;/strong&gt; or &lt;strong&gt;Attribute&lt;/strong&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;/:type/:id/:aspect&lt;/code&gt; e.g. &lt;code&gt;/user/1532/friends&lt;/code&gt; &lt;code&gt;/user/1532/pets&lt;/code&gt;: Return zero or more objects of some type related to designated object. In our examples, user #1532&amp;rsquo;s friends should be zero or more &lt;em&gt;user&lt;/em&gt; objects, and user #1532&amp;rsquo;s pets should be zero or more &lt;em&gt;pet&lt;/em&gt; objects.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Action&lt;/strong&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;/:type/:id/:action&lt;/code&gt; e.g. &lt;code&gt;/user/1532/follow&lt;/code&gt; &lt;code&gt;/user/1532/report&lt;/code&gt;: Perform certain action (&lt;em&gt;follow&lt;/em&gt; somebody or &lt;em&gt;report&lt;/em&gt; them as spam) to designated object.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;As you can see, The last pattern is not so RESTful. A far more RESTful way to do things like &lt;em&gt;following somebody&lt;/em&gt; may be: define an object type &lt;code&gt;relationship&lt;/code&gt; and provide &lt;code&gt;POST /relationship&lt;/code&gt; (with user A and B as parameters) to add a new relationship.&lt;/p&gt;&lt;p&gt;All I can say is that both ways will work fine in most systems and I leave the decision up to you.&lt;/p&gt;&lt;p&gt;Using &lt;em&gt;object type&lt;/em&gt; and &lt;em&gt;pattern&lt;/em&gt; as two dimensions of the API taxonomy is a very good start point. Almost all RESTful web service systems can put API endpoints into a matrix like below:&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th style=&#34;text-align:center&#34;&gt;Object&lt;/th&gt;&lt;th style=&#34;text-align:center&#34;&gt;Query&lt;/th&gt;&lt;th style=&#34;text-align:center&#34;&gt;Aspect&lt;/th&gt;&lt;th style=&#34;text-align:center&#34;&gt;Action&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td style=&#34;text-align:center&#34;&gt;user&lt;/td&gt;&lt;td style=&#34;text-align:center&#34;&gt;search&lt;/td&gt;&lt;td style=&#34;text-align:center&#34;&gt;friends pets&lt;/td&gt;&lt;td style=&#34;text-align:center&#34;&gt;follow&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&#34;text-align:center&#34;&gt;pet&lt;/td&gt;&lt;td style=&#34;text-align:center&#34;&gt;search cats dogs&lt;/td&gt;&lt;td style=&#34;text-align:center&#34;&gt;master cousins&lt;/td&gt;&lt;td style=&#34;text-align:center&#34;&gt;gift&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&#34;text-align:center&#34;&gt;house&lt;/td&gt;&lt;td style=&#34;text-align:center&#34;&gt;search&lt;/td&gt;&lt;td style=&#34;text-align:center&#34;&gt;residents&lt;/td&gt;&lt;td style=&#34;text-align:center&#34;&gt; &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Well, some special APIs will be hard to classify. Here are the most commonly used two (we won&amp;rsquo;t discuss more, just list them here):&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;compound&lt;/code&gt;: combine several API requests into a batch and response the batch results altogether.&lt;/li&gt;&lt;li&gt;&lt;code&gt;realtime&lt;/code&gt; or &lt;code&gt;stream&lt;/code&gt;: stream realtime activity logs to the client, which needs very different mechanism to work out.&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&#34;34-api-specs&#34;&gt;3.4 API Specs&lt;/h3&gt;&lt;p&gt;For every endpoints in the API matrix you need a consistent and clean spec which follows these rules:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Endpoint&lt;/strong&gt;: basic info for calling the endpoint (complete URI, HTTP verbs, security options, etc.).&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Parameters&lt;/strong&gt;: list of all parameters, each of which should include &lt;em&gt;name&lt;/em&gt;, &lt;em&gt;example&lt;/em&gt;, &lt;em&gt;description&lt;/em&gt;, &lt;em&gt;required or optional&lt;/em&gt; and other useful information.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Response&lt;/strong&gt;: all data fields in the response data. Each fields can be some plain value or a pre-defined business object structure, as described in the &lt;a href=&#34;/posts/a-brief-guide-of-soa-p1/&#34;&gt;first part&lt;/a&gt; of this article.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Examples&lt;/strong&gt;: clickable examples of calling this endpoint (see section 3.5 below).&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Here is a good documentation example from &lt;a href=&#34;https://foursquare.com&#34;&gt;foursquare&lt;/a&gt; platform: &lt;a href=&#34;https://developer.foursquare.com/docs/checkins/add&#34;&gt;create a check-in&lt;/a&gt;.&lt;/p&gt;&lt;h3 id=&#34;35-test-the-specs&#34;&gt;3.5 Test the Specs&lt;/h3&gt;&lt;p&gt;To give app developers&amp;rsquo; and yourself a better life, you need an API test console from the first day. It can be a command line tool or a GUI tool or, the easiest and most convenient way, a browser based tool. In the test console user can input token and API endpoint, choose HTTP verb, input parameters and get 100% real response data, in nicely formatted JSON format. It can save tons of time and money. Have a look at foursquare&amp;rsquo;s &lt;a href=&#34;https://developer.foursquare.com/docs/explore#req=users/self&#34;&gt;online API explorer&lt;/a&gt; for some real world example.&lt;/p&gt;&lt;p&gt;Further more, an automatic regressive testing solution should be considered as early as possible. Web services are entries of your business and API implementation will surely be in a continuously developing progress. After any changes a series of strict tests must be automatically executed to confirm that all APIs are still working as intended. Use a high productivity dynamic language such as Ruby or Python to write a simple but complete client lib for your APIs and build test case for every defined API endpoints. Personally I like Ruby w/ RSpec but many other languages and frameworks also work fine.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;To be continued&amp;hellip;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;In the final part of this series we will talk about implementation of the API specs.&lt;/p&gt;</description>
     </item>
   
     <item>
       <title>Europe Summer 2012 and 500px</title>
       <link>/posts/europe-summer-2012-and-500px/</link>
       <pubDate>Tue, 18 Sep 2012 14:18:00 +0800</pubDate>
       
       <guid>/posts/europe-summer-2012-and-500px/</guid>
       <description>&lt;p&gt;I spent my summer vacation with my family in Germany, Austria and Switzerland. It&amp;rsquo;s the first time I visit Europe. Had bunch of photos, most of which are taken by my Fujifilm Finepix X100 with its wide conversion lens WCL-X100. After one and half months I finally picked up &lt;a href=&#34;http://500px.com/soulhacker/sets/europe_tour_2012&#34;&gt;~150 photos&lt;/a&gt; and uploaded them to 500px.&lt;/p&gt;&lt;p&gt;X100 is a really amazing camera. Its &lt;a href=&#34;http://www.dxomark.com/index.php/en.../Cameras/Camera-Sensor-Database/Fujifilm/FinePix-X100&#34;&gt;top-of-the-line&lt;/a&gt; APS-C sized CMOS sensor provides great resolution and SNR. Its prime lens (with field of view equivalent to 35mm and 28mm lens on full frame) are especially suitable for landscape and cultural photography. iPhone 4S is a great backup, provide fairly good photos even in some typically difficult scenarios for compact DCs. Remember all these are very lightweight. Farewell my big DSLRs. &lt;em&gt;The best cameras are the ones you always take with you.&lt;/em&gt;&lt;/p&gt;&lt;p&gt;As for the digital darkroom, Aperture is a perfect tool both on organising and editing. And the &lt;a href=&#34;https://github.com/iKenndac/500px-Aperture-Uploader/&#34;&gt;500px Uploader&lt;/a&gt; developed by iKenndac significantly simplifies the process of uploading photos to 500px. But I have some serious suggestions for 500px. Yep, this is the real reason I wrote this blog.&lt;/p&gt;&lt;p&gt;First of all, please provide full support to all high DPI displays, i.e. iPhone 4/4S/5, the latest iPad and the MBP with Retina Display. You are a professional photography site and you have to support the best display devices in this planet, don&amp;rsquo;t you? It feels very bad when I see those low resolution photos in the shiny Retina Display MBP, especially when I&amp;rsquo;ve uploaded all the full resolution(12MP) images.&lt;/p&gt;&lt;p&gt;Second, re-design your site navigation please. Think about it, user has profile, sets and stories. When I dig into some photo I want clear path to get out (e.g. back to a set or story). And I&amp;rsquo;d like some shortcut to quickly navigate between my sets and stories. The site&amp;rsquo;s navigation design does not exist, for now.&lt;/p&gt;&lt;p&gt;Third, the Organizer should be designed for batch operation. We can only drag one photo at a time. I uploaded several hundreds photos and had to drag several hundreds times to move them to specific sets. How could it work sir?&lt;/p&gt;&lt;p&gt;The last but not least. Why add some grey corner to the photo thumb in the set view? Just to put the shopping cart icon there? Do you know that the grey corners are most common flaws of photos? The grey corners make my photos look flawed and it&amp;rsquo;s not cool.&lt;/p&gt;&lt;p&gt;If I have time I can list more issues on 500px&amp;rsquo;s function and interaction design. But I think the ones listed are more than enough.&lt;/p&gt;&lt;p&gt;Actually 500px has some very good sense and idea on high quality photo sharing and exchanging. But the bad user experience (although the UI is beautiful and fairly responsive) and slow development may kill it. I&amp;rsquo;m a Plus member for a while but I highly doubt that I will upgrade to Awesome without seeing some significant changes on the site.&lt;/p&gt;</description>
     </item>
   
     <item>
       <title>WANTED: Image Website Tool Not Suck</title>
       <link>/posts/wanted-image-website-tool-not-suck/</link>
       <pubDate>Tue, 01 May 2012 12:28:00 +0800</pubDate>
       
       <guid>/posts/wanted-image-website-tool-not-suck/</guid>
       <description>&lt;p&gt;Per my 13-years old daughter&amp;rsquo;s request I&amp;rsquo;m searching for some tools to build her own image website, so she can publish and manage all her drawings and photos. To my surprise after all these years there are still very few such tools that not sucks.&lt;/p&gt;&lt;p&gt;&lt;a href=&#34;http://gallery.menalto.com/&#34;&gt;Gallery&lt;/a&gt;, &lt;a href=&#34;http://piwigo.org/&#34;&gt;Piwigo&lt;/a&gt;, &lt;a href=&#34;http://www.zenphoto.org/&#34;&gt;Zenphoto&lt;/a&gt;, &lt;a href=&#34;http://www.e2interactive.com/e2_photo_gallery/&#34;&gt;E2 Photo Gallery&lt;/a&gt;, etc. They are old, powerful and actively developed. But all of them are so &lt;em&gt;last-century&lt;/em&gt;. They are ancient content manage systems and just not work for modern creative artists, like  my daughter of cause. Here is &lt;em&gt;my requirements&lt;/em&gt;:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Free and open source (optional)&lt;/li&gt;&lt;li&gt;Easy to deploy to shared hosting service and/or VPS&lt;/li&gt;&lt;li&gt;Easy-to-use uploading tool which supports single and multiple files&lt;/li&gt;&lt;li&gt;Support imagesets (&amp;ldquo;albums&amp;rdquo;)&lt;/li&gt;&lt;li&gt;Support tags&lt;/li&gt;&lt;li&gt;Manageable commenting and rating system (built-in or integration with Disqus)&lt;/li&gt;&lt;li&gt;Support direct hyperlinks to the images (can be toggled on/off per album based)&lt;/li&gt;&lt;li&gt;Sharing button for Twitter and other social networks&lt;/li&gt;&lt;li&gt;Automatically EXIF/IPTC handling&lt;/li&gt;&lt;li&gt;Thumbnail view with AJAX based in-place zooming and editing (for meta info)&lt;/li&gt;&lt;li&gt;Cool built-in themes (at lease 2 for dark and light backgrounds), simple but working customizing system&lt;/li&gt;&lt;li&gt;Support iPhone &lt;em&gt;and&lt;/em&gt; iPad-size mobile devices&lt;/li&gt;&lt;li&gt;Support i18n&lt;/li&gt;&lt;li&gt;Easy to backup/restore or export/import&lt;/li&gt;&lt;li&gt;Acceptable performance for hundreds of images&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;I think these requirements are very normal and reasonable for thousands of users. BTW, you will find out that &lt;a href=&#34;http://www.flickr.com&#34;&gt;Flickr.com&lt;/a&gt; matches most of them quite well, which may prove that Flickr is still the best image hosting and sharing service in the Internet.&lt;/p&gt;&lt;p&gt;Anyone suggestion?&lt;/p&gt;&lt;p&gt;If not, maybe I should write one and it will be an excellent beginning for some amazing startup right? Any good designers or programmers want to join?&lt;/p&gt;&lt;p&gt;&lt;strong&gt;UPDATED:&lt;/strong&gt; Used &lt;a href=&#34;http://wordpress.org/&#34;&gt;Wordpress&lt;/a&gt; + &lt;a href=&#34;http://wpshower.com/themes/imbalance-2/&#34;&gt;Imbalance 2 Theme&lt;/a&gt; as an intermediate solution. The problem is still there but my daughter can &lt;a href=&#34;http://i.laimi.info/&#34;&gt;have her work done&lt;/a&gt; for now.&lt;/p&gt;</description>
     </item>
   
     <item>
       <title>A Brief Guide of (RESTful) SOA, Part I</title>
       <link>/posts/a-brief-guide-of-soa-p1/</link>
       <pubDate>Fri, 27 Apr 2012 16:53:00 +0800</pubDate>
       
       <guid>/posts/a-brief-guide-of-soa-p1/</guid>
       <description>&lt;p&gt;Many say that &lt;code&gt;XML&lt;/code&gt; &lt;code&gt;SOAP&lt;/code&gt; &lt;code&gt;WS-\*&lt;/code&gt; suck and SOA is over or becoming profit tool for big consultant companies. But I would say: SOA is &lt;em&gt;not&lt;/em&gt; evil, IBM is. Look at these principles of SOA:&lt;/p&gt;&lt;blockquote&gt;&lt;ul&gt;&lt;li&gt;reuse, granularity, modularity, composability, componentization and interoperability.&lt;/li&gt;&lt;li&gt;standards-compliance (both common and industry-specific).&lt;/li&gt;&lt;li&gt;services identification and categorization, provisioning and delivery, and monitoring and tracking.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&amp;ndash; &lt;em&gt;Wikipedia &lt;a href=&#34;http://en.wikipedia.org/wiki/Service-oriented_architecture#Principles&#34;&gt;Service-oriented architecture&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;All these are perfect software architectural styles(well, except those words your spell checker complains), our best dream. These can&amp;rsquo;t be wrong. The problem is in the implementations. Fortunately the rises of RESTful services on the open web prove that the spirit of SOA can really matters. Maybe one day similar architecture and implementation will eventually change enterprise computing in return.&lt;/p&gt;&lt;p&gt;I always believe &lt;strong&gt;the service-oriented architecture will be the future of massive distributed software system&lt;/strong&gt;. And &lt;strong&gt;RESTful services will replace web sites and eventually become the main body of the Internet&lt;/strong&gt;. So I often think about how to help approaching it. I know that lots of people want to implement RESTful style services in their system (though they may not know what for). What they need is a brief and clean(maybe not extremely accurate and complete) guideline when practicing RESTful services. It can help to make things right and avoid traps such as using HTTP request as RPC protocol - it can be used as RPC protocol but it&amp;rsquo;s not RESTful and cannot provide key benefits which REST want to apply.&lt;/p&gt;&lt;p&gt;Here it is. Below I&amp;rsquo;ll list a brief guide which can help you find the path, as in the Matrix movies Morpheus told Neo about the Oracle:&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&amp;ldquo;Try not to think of it in terms of right and wrong. She is a guide. She can help you to find the path.&amp;rdquo;&lt;/p&gt;&lt;p&gt;&amp;ndash; &lt;em&gt;Morpheus, The Matrix Movie&lt;/em&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;Don&amp;rsquo;t get me wrong, I tried my best to keep it right and accurate, but it&amp;rsquo;s very complicated and cannot be completely covered and explained while keep it simple and readable. If you want more conceptual or technical details, I&amp;rsquo;ll leave you a bunch of references.&lt;/p&gt;&lt;p&gt;Even we have all these compromises this guide will still be too long for a single blog post, so I will divide it into 3 parts and complete them within a month or two.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; In this guide, &lt;em&gt;service oriented architecture&lt;/em&gt; and &lt;em&gt;RESTful architecture style&lt;/em&gt; are nearly the same concept. I will use the term &lt;em&gt;RESTful&lt;/em&gt; from here on.&lt;/p&gt;&lt;h2 id=&#34;level-i-basic-definitions-and-rules&#34;&gt;Level I: Basic Definitions and Rules&lt;/h2&gt;&lt;h3 id=&#34;11-objectives&#34;&gt;1.1 Objectives&lt;/h3&gt;&lt;p&gt;First of all you should know the purpose, why your service should follow the RESTful style and what benefits you can get. So when you get some trouble making architectural decision you can use these high level objectives to test all options: which one is the best for these objective?&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Decoupled:&lt;/strong&gt; Services are decoupled from each other and from service consumers. All services and service consumers can evolve independently. Service consumers can integrate different services more easily. For example, You can provide a good service interface and an ugly(but working) implementation, then improve the implementation before the service becoming very popular and requests crashing down your server.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;More scalable and flexible:&lt;/strong&gt; Services can be more easily changed, scaling, tuning, refactoring. Even when business changes, the services can be more easily changed to match the new business while keep compatibility with old business(clients).&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Easier integration and mash-up:&lt;/strong&gt; All services have uniform interfaces and similar behaviors. Clients to same service are exchangeable. Service integration, inter-op and mash-up are easier to implement.&lt;/p&gt;&lt;h3 id=&#34;12-core-principles&#34;&gt;1.2 Core Principles&lt;/h3&gt;&lt;p&gt;RESTful style requires:&lt;/p&gt;&lt;p&gt;&lt;strong&gt;A client-server model&lt;/strong&gt; which provides better &lt;em&gt;separation of concerns&lt;/em&gt;(SoC). The service provider(&lt;em&gt;server&lt;/em&gt;) need not to know the user interfaces and HCIs while the service consumer(&lt;em&gt;client&lt;/em&gt;) need not to know the data storage and infrastructure, which give far more opportunity for reusing and changing without pain.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Stateless:&lt;/strong&gt; No client state or context will be stored on server between requests. Each request should contain all information necessary for the server to service the request, and any session state should be held in the client.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Cacheable:&lt;/strong&gt; Clients can cache responses. Furthermore, server and client should have a protocol to define caching strategy: which response can be cached, for how long or till what happens, to prevent clients reusing inappropriate cached data.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Layered:&lt;/strong&gt; System is layered and no cross layer info exposures. Client cannot tell whether it is directly connecting to the service provider or some intermediate layer, giving the interface is the same.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Uniform interface&lt;/strong&gt; which makes server and client decoupled on implementation, enables each part to evolve independently. It&amp;rsquo;s the most practical part so we will discuss it separately below.&lt;/p&gt;&lt;p&gt;All these 5 rules are required. If a service violet any of them it cannot be called &amp;lsquo;RESTful&amp;rsquo; - and more important, cannot get the benefits which RESTful styles declare to provide. So understanding all of them is the most important pre-requisite.&lt;/p&gt;&lt;h2 id=&#34;level-ii-define-your-system&#34;&gt;Level II: Define Your System&lt;/h2&gt;&lt;p&gt;Before defining the APIs you should define your system first. You can do it through 2 steps:&lt;/p&gt;&lt;h3 id=&#34;21-business-abstraction&#34;&gt;2.1 Business Abstraction&lt;/h3&gt;&lt;p&gt;Business abstraction is &lt;a href=&#34;/blog/2011/12/24/back-end-is-hard/&#34;&gt;very important but hard to routinize&lt;/a&gt;. And it&amp;rsquo;s mostly beyond the realm which RESTful style can control. You should find the &lt;em&gt;essential&lt;/em&gt; business concepts and make smart abstraction for high flexibility and extensibility. Yet we still can have some guideline. Probably will not solve the most difficult part of the problem but still give some help.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Find business objects.&lt;/strong&gt; When the system complete, every business objects exposed to the public will be presented as an URI. Clients can issue &lt;code&gt;POST&lt;/code&gt; &lt;code&gt;GET&lt;/code&gt; &lt;code&gt;PATCH/PUT&lt;/code&gt; &lt;code&gt;DELETE&lt;/code&gt; requests to the URI to &lt;code&gt;CRUD&lt;/code&gt;(create/read/update/delete) correlated object. &lt;em&gt;So any objects you want to exposed to the public for clients to do the &lt;code&gt;CRUD&lt;/code&gt; things you should make them in the business object model, as essential objects.&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Define the relations.&lt;/strong&gt; Next step is to define the relations between objects. The classical entity-relation analysis methodology is very good at that. Find all &lt;code&gt;1-1&lt;/code&gt; &lt;code&gt;1-*&lt;/code&gt;  &lt;code&gt;*-*&lt;/code&gt; etc. relations and make them clearly documented.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;The object graph.&lt;/strong&gt; It&amp;rsquo;s optional but very useful. In most case build an &lt;a href=&#34;http://en.wikipedia.org/wiki/Object_graph&#34;&gt;object graph&lt;/a&gt; at this stage will help to clarify many potential obscure concepts in the business object model. Try fill some real data in the object model and understand the order and constrains of each operation. Refine the object-relation model if necessary.&lt;/p&gt;&lt;h3 id=&#34;22-define-response-objects&#34;&gt;2.2 Define Response Objects&lt;/h3&gt;&lt;p&gt;Now define some response data formats. Some may feel weird to do that in such early stage but trust me it&amp;rsquo;s the best path you can choose.&lt;/p&gt;&lt;p&gt;Firstly you should know that as highly recommended by RESTful style, the object and its &lt;em&gt;representation&lt;/em&gt; are isolated. The same object can have many different &lt;em&gt;representations&lt;/em&gt; which can be designated by the clients when issuing the request.&lt;/p&gt;&lt;p&gt;Second, do &lt;em&gt;NOT&lt;/em&gt; try to invent your own &lt;em&gt;representation&lt;/em&gt; type system, just use the well defined exist Internet media types(originally called MIME types), as defined in &lt;a href=&#34;http://tools.ietf.org/html/rfc2046&#34;&gt;RFC 2046&lt;/a&gt;. Every system on the Internet have built-in support to it and all developers are familiar with &lt;code&gt;text/html&lt;/code&gt; &lt;code&gt;application/json&lt;/code&gt; &lt;code&gt;image/jpeg&lt;/code&gt; &lt;code&gt;multipart/form-data&lt;/code&gt; etc.&lt;/p&gt;&lt;p&gt;Now define the &lt;em&gt;core&lt;/em&gt; response objects, in JSON format. Normally when clients request for a business object e.g. &lt;code&gt;GET /user/:uid&lt;/code&gt; the service will return a &lt;code&gt;user&lt;/code&gt; object in JSON format(&lt;code&gt;application/json&lt;/code&gt;). JSON has become the most widely used cross platform data exchange format these days. You can provide support for responses in other media types such as &lt;code&gt;text/html&lt;/code&gt; &lt;code&gt;application/pdf&lt;/code&gt; later. And here are some best practices for that:&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Separate core attributes and other attributes.&lt;/strong&gt; In most cases you should provide two versions of the same object type:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;The &lt;em&gt;compact&lt;/em&gt; version which only contains the most frequently used core attributes of the object and very lightweight(for bandwidth and for parsing), which is often used embedded within other object or in arrays.&lt;/li&gt;&lt;li&gt;The &lt;em&gt;detailed&lt;/em&gt; version which contains all fields in the &lt;em&gt;compact&lt;/em&gt; version plus more detail info, such as attributes not so frequently used and other objects related to this object, which is often used for clients retrieving a single object.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Below is a demo:&lt;/p&gt;&lt;figure class=&#34;mid&#34;&gt;&lt;img src=&#34;/images/posts/restful-soa-define-json-data.png&#34;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;strong&gt;Use embedded object not the object id.&lt;/strong&gt; Assuming you are working on a online comment system and you have objects &lt;code&gt;user&lt;/code&gt; and &lt;code&gt;post&lt;/code&gt;. In &lt;code&gt;post&lt;/code&gt; object there is an attribute &lt;code&gt;author&lt;/code&gt; pointing to a &lt;code&gt;user&lt;/code&gt; object. You should embedded a &lt;em&gt;compact&lt;/em&gt; version of &lt;code&gt;user&lt;/code&gt; object in the &lt;code&gt;post&lt;/code&gt; object instead of only the user id. As shown in the snippet below:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// BAD style&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;post&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10010&lt;/span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;title&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello&amp;#34;&lt;/span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;body&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hi there!&amp;#34;&lt;/span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;createdAt&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1333250513&lt;/span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;author&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  ...&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// GOOD style&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;post&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10010&lt;/span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;title&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello&amp;#34;&lt;/span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;body&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hi there!&amp;#34;&lt;/span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;createdAt&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1333250513&lt;/span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;author&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;nickName&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;soulhacker&amp;#34;&lt;/span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;avatar&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;status&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Doing something matters&amp;#34;&lt;/span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;online&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  },&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  ...&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In many cases this strategy will bring data redundancy but make client-side parsing and handling more convenient. Server-side implementation will be more structural and reusable as well.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Normalize array representation&lt;/strong&gt; so clients can parse them using one single handler. Below is return data of some user search API:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;users&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;total&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;126&lt;/span&gt;, &lt;span style=&#34;color:#75715e&#34;&gt;// totally 126 users match this request&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;count&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;, &lt;span style=&#34;color:#75715e&#34;&gt;// but we just return the first 10 records&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;items&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; [&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      ... &lt;span style=&#34;color:#75715e&#34;&gt;// a compact user object inside &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    }&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ... &lt;span style=&#34;color:#75715e&#34;&gt;// 9 more user objects here&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  ]&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Client-side handling can be very simple and reusable. Snippet below shows how it goes in Ruby:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Utility methods&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;countFromJSONCollection&lt;/span&gt;(data)&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;# data is a JSON object return from JSON.parse(response)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; data &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  total &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; data&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;total&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  count &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; data&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;count&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; Integer(total), Integer(count)&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;itemsFromJSONCollection&lt;/span&gt;(data, c)&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;# c is a class with class method named fromJSON to init object&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; c &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; data &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; data&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;items&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  count &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; data&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;items&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;].&lt;/span&gt;size&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  array &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; Array&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;new(count) { &lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt;i&lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt; c&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fromJSON(data&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;items&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;][&lt;/span&gt;i&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;) }&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Collection&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;attr_accessor&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;:total&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;:count&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;:items&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;self&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;fromJSON&lt;/span&gt;(data&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;, c&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; data &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; c &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    coll &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    coll&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;total, coll&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;count &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; countFromJSONCollection(data)&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    coll&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;items &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; itemsFromJSONCollection(data, c)&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    coll&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Explicitly mark all required and optional fields.&lt;/strong&gt; Not all data are equally important. As part of the protocol service providers should let clients know exactly which ones are optional. But remember HTTP is not a reliable communication protocol and the network status is even more complicated in mobile Internet, clients should do all error-tolerant things even for those fields marked as required.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;To be continued&amp;hellip;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;In the following parts we will talk about how to define the API specs and give general info about concerns in implementation.&lt;/p&gt;</description>
     </item>
   
     <item>
       <title>Soul Link</title>
       <link>/posts/soul-link/</link>
       <pubDate>Sat, 31 Mar 2012 16:56:00 +0800</pubDate>
       
       <guid>/posts/soul-link/</guid>
       <description>&lt;figure class=&#34;floatleft&#34;&gt;&lt;img src=&#34;/images/posts/paper-by-fiftythree.jpg&#34; width=&#34;240&#34;/&gt;&lt;/figure&gt;&lt;p&gt;Apple AppStore&amp;rsquo;s biggest news this week is that, &lt;a href=&#34;http://www.fiftythree.com/paper&#34;&gt;FiftyThree&amp;rsquo;s Paper&lt;/a&gt; became the &lt;a href=&#34;http://itunes.apple.com/app/paper-by-fiftythree/id506003812?mt=8&#34;&gt;iPad App of the Week&lt;/a&gt; in just 2 days. I think that it&amp;rsquo;s far from coincidence.&lt;/p&gt;&lt;p&gt;I tried &lt;em&gt;Paper&lt;/em&gt; for several hours. It offers no unique features. It&amp;rsquo;s much less powerful than &lt;a href=&#34;http://itunes.apple.com/app/sketchbook-pro-for-ipad/id364253478?mt=8&#34;&gt;AutoDesk&amp;rsquo;s SketchBook Pro&lt;/a&gt;, a full-featured paint tool especially designed for the new iPad&amp;rsquo;s Retina Display which was showed off on Apple&amp;rsquo;s event. But I can predict that &lt;em&gt;Paper&lt;/em&gt; will be much more popular. So why is it so special?&lt;/p&gt;&lt;p&gt;Watch their &lt;a href=&#34;http://vimeo.com/37254322&#34;&gt;official trailer&lt;/a&gt; and you can get some clues. The trailer spreads several important ideas: 1. &lt;em&gt;Paper&lt;/em&gt; can be used anytime anywhere whenever people want to use pen and paper. 2. The User, the iPad, &lt;em&gt;Paper&lt;/em&gt; and the stylus work together as a whole. 3. All these are all about the user&amp;rsquo;s lifestyle, becoming part to it.&lt;/p&gt;&lt;figure class=&#34;floatright&#34;&gt;&lt;img src=&#34;/images/posts/don-draper.gif&#34; width=&#34;240&#34;/&gt;&lt;/figure&gt;&lt;p&gt;So what do you think while watching the video? Desire to light up your iPad at once and sketch something? Think about buying one &lt;a href=&#34;http://wacom.com/en/Products/Bamboo/BambooStylus.aspx&#34;&gt;Wacom Stylus&lt;/a&gt; for your iPad? Or those &lt;a href=&#34;http://www.youtube.com/watch?v=D2BvVcSkNkA&#34;&gt;amazing&lt;/a&gt; &lt;a href=&#34;http://www.youtube.com/watch?v=9bYx3iEdzzc&#34;&gt;ads&lt;/a&gt; for the &lt;a href=&#34;http://www.youtube.com/watch?v=btfbIVGES1I&#34;&gt;original&lt;/a&gt; &lt;a href=&#34;http://www.youtube.com/watch?v=NMvETJ0bxEQ&#34;&gt;iPad&lt;/a&gt;? My answer is: all of them. And one more &lt;del&gt;thing&lt;/del&gt; person, Don Draper.&lt;/p&gt;&lt;p&gt;In &lt;em&gt;Mad Men&lt;/em&gt;&amp;rsquo;s season I finale, &lt;em&gt;The Wheel&lt;/em&gt;, people from Eastman Kodak brought their new invention, a &lt;a href=&#34;http://en.wikipedia.org/wiki/Carousel_slide_projector&#34;&gt;slide projector&lt;/a&gt; to Don Draper for a name and an ad campaign proposal. After a typical &lt;a href=&#34;/images/don-draper-inspiration.jpg&#34;&gt;&lt;em&gt;Don&amp;rsquo;s inspiration routine&lt;/em&gt;&lt;/a&gt; Don Draper dug up a vision from his childhood and proposed &amp;lsquo;&lt;em&gt;Carousel&lt;/em&gt;&amp;rsquo; as the name of the projector, which made it a symbolic memento of everybody&amp;rsquo;s childhood. Don Drape explained this idea as below:&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&amp;ldquo;Technology is a glittering lure. But there&amp;rsquo;s the rare occasion when the public can be engaged on a level beyond flash, if they have a sentimental bond with the product.&amp;rdquo;&lt;/p&gt;&lt;p&gt;&amp;ndash; &lt;em&gt;Don Draper, Mad Men Season I Episode 13 &amp;ldquo;The Wheel&amp;rdquo;&lt;/em&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;Functional features are the &lt;em&gt;essence&lt;/em&gt; of a product. But most product features are not so specific nor unique for the users. Thus they cannot differentiate your product from similar ones (either from you or your competitors). You&amp;rsquo;d find a way to lure the users to use it, and you have to guide your users to the perfect moment to use it. Under specific scenarios or circumstances some of your design will make your product unique, any design that plants the strong idea into people&amp;rsquo;s mind, that your product is made just for them and for THAT moment. Finally users will become to &lt;strong&gt;depend&lt;/strong&gt; on your product at such moments. That&amp;rsquo;s the &lt;em&gt;sentimental bond&lt;/em&gt; as Don told us, and the &lt;em&gt;soul link&lt;/em&gt; between product and people.&lt;/p&gt;&lt;p&gt;There is a popular fallacious point among product guys, thinking that the well polished UI is the soul of product, which can make people be deeply &lt;em&gt;touched&lt;/em&gt;. It&amp;rsquo;s &lt;strong&gt;WRONG&lt;/strong&gt;. People may be touched, but that&amp;rsquo;s not your product&amp;rsquo;s purpose and people won&amp;rsquo;t love products just because they are touching. Try ask yourself:&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;After showing off your product to someone, can they intuitively understand what purpose and moments the product for, then remember your product and desire to have a try ASAP the right moment comes?&lt;/p&gt;&lt;/blockquote&gt;&lt;figure class=&#34;floatleft&#34;&gt;&lt;img src=&#34;/images/posts/paper-in-action.jpg&#34; width=&#34;240&#34;/&gt;&lt;/figure&gt;&lt;figure class=&#34;floatright&#34;&gt;&lt;img src=&#34;/images/posts/steve-jobs-and-iphone.jpg&#34; width=&#34;240&#34;/&gt;&lt;/figure&gt;&lt;p&gt;If not, they won&amp;rsquo;t be bonded to your product. Go get someone else or re-think your product and find the &lt;em&gt;soul link&lt;/em&gt;. &lt;em&gt;Seal&lt;/em&gt; the &lt;em&gt;link&lt;/em&gt; on each of every steps which give birth to your product: &lt;code&gt;designing&lt;/code&gt;, &lt;code&gt;building&lt;/code&gt;, &lt;code&gt;integrating&lt;/code&gt;, &lt;code&gt;presenting&lt;/code&gt; and &lt;code&gt;promoting&lt;/code&gt;.&lt;/p&gt;&lt;p&gt;It&amp;rsquo;s really simple rule. But in the history of technology very few people can make it. Steve Jobs is one perfect example and he had made Apple an organization talented to make products that way. I think that people in &lt;a href=&#34;http://www.fiftythree.com/about&#34;&gt;FiftyThree&lt;/a&gt; also have such talents. &lt;em&gt;Paper&lt;/em&gt; not only has strong soul link to people, but also to the iPad, Jobs&amp;rsquo; most favorite creation. I&amp;rsquo;m pretty sure that if Jobs were still alive, he would certainly love &lt;em&gt;Paper&lt;/em&gt; and its creators, and invite them to join Apple.&lt;/p&gt;</description>
     </item>
   
     <item>
       <title>Go for Android</title>
       <link>/posts/go-for-android/</link>
       <pubDate>Sun, 05 Feb 2012 19:42:00 +0800</pubDate>
       
       <guid>/posts/go-for-android/</guid>
       <description>&lt;p&gt;&lt;a href=&#34;http://golang.org/&#34;&gt;Go&lt;/a&gt; is &lt;em&gt;the&lt;/em&gt; language from Google and Android is &lt;em&gt;the&lt;/em&gt; mobile OS from Google. The bond between them are just born with. So there should be no surprise that we can use Go to write Android programs, though some important restricts for now:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;There is no Android SDK for Go, so no system API nor GUI for Go program on Android.&lt;/li&gt;&lt;li&gt;Go doesn&amp;rsquo;t support JNI for now. So Go programs have to be compiled as separate executables, wrapped as assets in apk and called within Java based apps.&lt;/li&gt;&lt;li&gt;Maybe cross-compiling is really hard. We cannot build Android applications which use Cgo(C bridge for Go) on our desktop computer for now, as shown below.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;But it&amp;rsquo;s not just a toy because of the following advantages:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Go is &lt;em&gt;fast&lt;/em&gt; and all C programmers just like it.&lt;/li&gt;&lt;li&gt;Go language is bundled with high quality libraries, especially suitable for special tasks.&lt;/li&gt;&lt;li&gt;Go is from Google! It does have a future! Well, at least let&amp;rsquo;s hope so.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Go is a very young language, thus there&amp;rsquo;s few guides or tutorials out there. But it also makes earlier investion provide more return. My friend and colleague &lt;a href=&#34;https://twitter.com/#!/rarnu&#34;&gt;@rarnu&lt;/a&gt; also likes the idea of writing Android program using Go and has written &lt;a href=&#34;http://blog.sina.com.cn/s/blog_68b671430100z4wn.html&#34;&gt;a short tutorial&lt;/a&gt;. I&amp;rsquo;d like to rewrite it here and fill all lost details which he was too lazy to include.&lt;/p&gt;&lt;h2 id=&#34;prerequisites&#34;&gt;Prerequisites&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;C Tools&lt;ul&gt;&lt;li&gt;GCC, C standard library, bison, GNU Make and Awk&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&#34;http://mercurial.selenic.com/wiki/Download&#34;&gt;Mercurial&lt;/a&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;hg&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&#34;http://developer.android.com/sdk/installing.html&#34;&gt;Android SDK&lt;/a&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;adb&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 id=&#34;preparing-go-language&#34;&gt;Preparing Go Language&lt;/h2&gt;&lt;p&gt;Firstly some environment variables need to be set (better be added to &lt;code&gt;.bashrc&lt;/code&gt; or &lt;code&gt;.zshrc&lt;/code&gt; etc.):&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;export GOROOT&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;$HOME&lt;span style=&#34;color:#e6db74&#34;&gt;/Code/Go/Home&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;export GOBIN&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;$GOROOT&lt;span style=&#34;color:#e6db74&#34;&gt;/bin&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;export PATH&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;$PATH&lt;span style=&#34;color:#e6db74&#34;&gt;:&lt;/span&gt;$GOBIN&lt;span style=&#34;color:#e6db74&#34;&gt;:&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;GOROOT&lt;/code&gt; should be the folder where Go source is in and &lt;code&gt;GOBIN&lt;/code&gt; should be in the system &lt;code&gt;PATH&lt;/code&gt;. Double check them and issue these commands in terminal:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;hg clone -u release https://go.googlecode.com/hg/ $GOROOT&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cd $GOROOT/src&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;export GOOS&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;linux&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;export GOARCH&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;arm&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./all.bash&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now check out &lt;code&gt;$GOBIN&lt;/code&gt; folder, three commands &lt;code&gt;go&lt;/code&gt; &lt;code&gt;godoc&lt;/code&gt; &lt;code&gt;gofmt&lt;/code&gt;(&lt;code&gt;go&lt;/code&gt; command line tools) and a folder &lt;code&gt;linux_arm&lt;/code&gt;(cross-compiling tools for Linux/ARM targets) should be in there. &lt;strong&gt;Line 2-5&lt;/strong&gt; can be run multiple times by setting different &lt;code&gt;$GOOS&lt;/code&gt; and &lt;code&gt;$GOARCH&lt;/code&gt; combinations to support &lt;code&gt;amd64&lt;/code&gt; &lt;code&gt;386&lt;/code&gt; and &lt;code&gt;arm&lt;/code&gt; instruction sets all in one install base. See &amp;ldquo;&lt;a href=&#34;http://golang.org/doc/install/source&#34;&gt;Installing Go from source&lt;/a&gt;&amp;rdquo; for detail.&lt;/p&gt;&lt;h2 id=&#34;hello-android-from-go&#34;&gt;Hello Android from Go!&lt;/h2&gt;&lt;p&gt;Now create Go source files for testing. Let&amp;rsquo;s start with the most favorite &amp;lsquo;Hello world!&amp;rsquo; one.&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    println(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello Android from Go!&amp;#34;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Compile it and generate executable:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;CGO_ENABLED&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; GOOS&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;linux GOARCH&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;arm go build -o hello-arm hello.go&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The last command will generate an executable named &lt;code&gt;hello-arm&lt;/code&gt; which targets Linux/ARM system (i.e. Android). Now connect to an debuggable Android device and issue in the same folder:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;adb push hello-arm /data/local/&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;adb shell&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/data/local/hello-arm&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If all things go right it will generate output as expected. Using the same routine showed above, all code examples on &lt;a href=&#34;http://golang.org/&#34;&gt;Go&amp;rsquo;s homepage&lt;/a&gt; can be verified working well on Android devices.&lt;/p&gt;&lt;h2 id=&#34;real-world-example&#34;&gt;Real World Example&lt;/h2&gt;&lt;p&gt;The following code example is borrowed from rarnu&amp;rsquo;s &lt;a href=&#34;http://blog.sina.com.cn/s/blog_68b671430100z4wn.html&#34;&gt;blog post&lt;/a&gt; and modified a bit.&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;net/http&amp;#34;&lt;/span&gt;; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;flag&amp;#34;&lt;/span&gt;; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;os&amp;#34;&lt;/span&gt;; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;strconv&amp;#34;&lt;/span&gt;; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;encoding/json&amp;#34;&lt;/span&gt;; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;io/ioutil&amp;#34;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;flag&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Parse&lt;/span&gt;()&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;flag&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NArg&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;os&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Stdout&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;WriteString&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\n&amp;#34;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;version&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;strconv&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Atoi&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;flag&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Arg&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;))&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;res&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Get&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;http://rarnu.7thgen.info/api/query_software_update.php&amp;#34;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;res&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;StatusCode&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt; {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;os&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Stdout&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;WriteString&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\n&amp;#34;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;buf&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ioutil&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ReadAll&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;res&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Body&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{}&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;json&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Unmarshal&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;buf&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.(&lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{});&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;lastver&amp;#34;&lt;/span&gt;];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;sver&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;strconv&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Atoi&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt;.(&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;))&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sver&lt;/span&gt; &amp;gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;version&lt;/span&gt; {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;fn&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;url&amp;#34;&lt;/span&gt;]&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;os&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Stdout&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;WriteString&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;fn&lt;/span&gt;.(&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\n&amp;#34;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;os&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Stdout&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;WriteString&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\n&amp;#34;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Handling JSON data returned from web services in Go is pretty neat and clean, right? Build it as above:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;CGO_ENABLED&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; GOOS&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;linux GOARCH&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;arm go build -o cu-arm checkupdate.go&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;adb push cu-arm /data/local/&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;adb shell&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/data/local/cu-arm &lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;When running it on my Galaxy Nexus (ARM v7 dual-core 1.2 GHz Cortex-A9, Android 4.0.2 with kernel 3.0.8) it crashed on &lt;strong&gt;line 14&lt;/strong&gt; - the &lt;code&gt;http.Get&lt;/code&gt; call failed. Because of some issues in the cross-compiling system, all calls using Cgo will cause failure like that, at least for now. Unfortunately the &lt;code&gt;net&lt;/code&gt; package depend on Cgo and nearly all useful applications need &lt;code&gt;net&lt;/code&gt; package.&lt;/p&gt;&lt;h2 id=&#34;call-go-code-in-android-apps&#34;&gt;Call Go Code in Android Apps&lt;/h2&gt;&lt;p&gt;Exactly the same as calling any native executables in Android apps, which fully explained in &lt;a href=&#34;http://gimite.net/en/index.php?Run%20native%20executable%20in%20Android%20App&#34;&gt;this guide&lt;/a&gt;. I&amp;rsquo;ll list a more general and accurate solution below for convenience.&lt;/p&gt;&lt;p&gt;The following Java class shows how to invoke a process in Android apps (actually it is used by Google itself), which is the base of the following guide:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CommandResult&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; String result &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; String error &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;runCommand&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;String command&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;boolean&lt;/span&gt; root&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        Log&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;e&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;runCommand&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; command&lt;span style=&#34;color:#f92672&#34;&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        Process process &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        DataOutputStream os &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        DataInputStream stdout &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        DataInputStream stderr &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        CommandResult ret &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; CommandResult&lt;span style=&#34;color:#f92672&#34;&gt;();&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            StringBuffer output &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; StringBuffer&lt;span style=&#34;color:#f92672&#34;&gt;();&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            StringBuffer error &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; StringBuffer&lt;span style=&#34;color:#f92672&#34;&gt;();&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;root&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                process &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; Runtime&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;getRuntime&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;().&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;exec&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;su&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                os &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; DataOutputStream&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;process&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;getOutputStream&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;());&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;writeBytes&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;command &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\n&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;writeBytes&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;exit\n&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;flush&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;();&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                process &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; Runtime&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;getRuntime&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;().&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;exec&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;command&lt;span style=&#34;color:#f92672&#34;&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            stdout &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; DataInputStream&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;process&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;getInputStream&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;());&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            String line&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;((&lt;/span&gt;line &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; stdout&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;readLine&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;())&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                output&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;append&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;line&lt;span style=&#34;color:#f92672&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;append&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;\n&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            stderr &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; DataInputStream&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;process&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;getErrorStream&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;());&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;((&lt;/span&gt;line &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; stderr&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;readLine&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;())&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                error&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;append&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;line&lt;span style=&#34;color:#f92672&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;append&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;\n&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            process&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;waitFor&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;();&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            ret&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; output&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;toString&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;().&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;trim&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;();&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            ret&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; error&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;toString&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;().&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;trim&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;();&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;Exception e&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            ret&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            ret&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; e&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;getMessage&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;();&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;finally&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;os &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;close&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;();&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;stdout &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    stdout&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;close&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;();&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;stderr &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    stderr&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;close&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;();&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                process&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;destroy&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;();&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;Exception e&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                ret&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                ret&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; e&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;getMessage&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;();&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; ret&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To run a native executable (whether written in Go or not) in Android apps:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Include the binary &lt;code&gt;go-exec&lt;/code&gt; in the &lt;code&gt;assets&lt;/code&gt; folder.&lt;/li&gt;&lt;li&gt;Use &lt;code&gt;getAssets().open(&amp;quot;go-exec&amp;quot;)&lt;/code&gt; to get an &lt;code&gt;InputStream&lt;/code&gt;.&lt;/li&gt;&lt;li&gt;Write it to &lt;code&gt;/data/data/app-package-name/&lt;/code&gt;, where the app has access to write files and make it executable.&lt;/li&gt;&lt;li&gt;Make it executable using the code above, i.e. &lt;code&gt;CommandResult.runCommand(&amp;quot;/system/bin/chmod 744 /data/data/app-package-name/go-exec&amp;quot;, 0)&lt;/code&gt;&lt;/li&gt;&lt;li&gt;Run &lt;code&gt;/data/data/app-package-name/go-exec&lt;/code&gt; using the code above.&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&#34;updates&#34;&gt;Updates&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Go 1&lt;/code&gt; is now live! Article updated to match changes in &lt;code&gt;Go 1&lt;/code&gt;. And the &lt;code&gt;Go 1&lt;/code&gt; &lt;a href=&#34;http://golang.org/doc/go1.html&#34;&gt;release note&lt;/a&gt; is a must read.&lt;/p&gt;</description>
     </item>
   
     <item>
       <title>Introducing RestKit</title>
       <link>/posts/introducing-restkit/</link>
       <pubDate>Tue, 31 Jan 2012 18:59:00 +0800</pubDate>
       
       <guid>/posts/introducing-restkit/</guid>
       <description>&lt;p&gt;&lt;a href=&#34;http://restkit.org/&#34;&gt;RestKit&lt;/a&gt; is an amazing &lt;strong&gt;Objective-C framework for iOS&lt;/strong&gt; that aims to make interacting with RESTful web services simple, fast and fun. As said on its homepage:&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;It combines a clean, simple HTTP request/response API with a powerful object mapping system that reduces the amount of code you need to write to get stuff done.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;RestKit provides several components:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;strong&gt;An HTTP client component&lt;/strong&gt; based on &lt;code&gt;NSURLConnection&lt;/code&gt;. It&amp;rsquo;s not as feature-packed as ASIHTTPRequest&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;, but it does its part very well in most cases. It supports &lt;code&gt;GET&lt;/code&gt; &lt;code&gt;POST&lt;/code&gt; &lt;code&gt;PUT&lt;/code&gt; &lt;code&gt;DELETE&lt;/code&gt;, &lt;code&gt;SSL&lt;/code&gt; &amp;amp; &lt;code&gt;HTTP AUTH&lt;/code&gt;, multi-part, etc. It even provides a request queue to manage the HTTP requests(mostly implicitly), making them more memory and bandwidth efficient.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;A powerful but elegant object mapping system&lt;/strong&gt;, which uses idiomatic key-value coding mechanism to define and implement the round-trip transformation between &lt;code&gt;JSON&lt;/code&gt;&lt;sup id=&#34;fnref:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt; string and native Objective-C class. Well, the magic behind it is called &lt;a href=&#34;https://github.com/jverkoey/sockit&#34;&gt;SOCKit&lt;/a&gt;&lt;sup id=&#34;fnref:3&#34;&gt;&lt;a href=&#34;#fn:3&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;3&lt;/a&gt;&lt;/sup&gt;.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;A persistent layer&lt;/strong&gt; built on top of the object mapping system, fully integrated with CoreData. Can be used as app&amp;rsquo;s primary data storage or just local cache.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Miscellaneous helpers&lt;/strong&gt; for better life. Reachability, database seeding, API environments switching, etc.&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;Other than making another almighty monster its creators focus on the remote-local object (can be transient or persistent through CoreData) mapping. They made it through the &amp;lsquo;&lt;em&gt;common things simple, others possible&lt;/em&gt;&amp;rsquo; philosophy, which I always love.&lt;/p&gt;&lt;p&gt;RestKit has some &lt;a href=&#34;https://github.com/RestKit/RestKit/wiki&#34;&gt;documentations&lt;/a&gt; but not very well organized. Maybe it&amp;rsquo;s the biggest problem for beginners. So I&amp;rsquo;d like to list below some most useful solution recipes I&amp;rsquo;ve used in real world project, updated progressively.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;em&gt;&lt;strong&gt;WARNING&lt;/strong&gt;&lt;/em&gt;&lt;/strong&gt;: it will be incredibly long anyway.&lt;/p&gt;&lt;h2 id=&#34;setting-up&#34;&gt;Setting up&lt;/h2&gt;&lt;p&gt;RestKit provides two ways to set up the RestKit client: &lt;code&gt;RKClient&lt;/code&gt; and &lt;code&gt;RKObjectManager&lt;/code&gt;. If you want to manually handle the return data you should use &lt;code&gt;RKClient&lt;/code&gt;. Otherwise, if you want to use the RestKit object mapping system, then &lt;code&gt;RKObjectManager&lt;/code&gt; is the one.&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// API base (and the whole API environment) can be switched by&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#define gkBaseURL @&amp;#34;https:&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//api.domain.com/v2&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;RKObjectManager&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; manager &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [RKObjectManager objectManagerWithBaseURL:gkBaseURL];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;NSLog(&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;I am your RKObjectManager singleton : %@&amp;#34;&lt;/span&gt;, manager);&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Or you can use&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;RKClient &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;client &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [RKClient clientWithBaseURL:gkBaseURL];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;NSLog(&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;I am your RKClient singleton : %@&amp;#34;&lt;/span&gt;, client);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;RestKit uses a convenient convention: the first initialized client object becomes a singleton and can be referenced by &lt;code&gt;[RKClient sharedClient]&lt;/code&gt; or &lt;code&gt;[RKObjectManager sharedManager]&lt;/code&gt; correspondingly.&lt;/p&gt;&lt;p&gt;In real world we usually have more than one base URLs, say, one for product environment, the second for testing and third for developing. The base URL can be easily changed globally:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;[[RKClient sharedClient] setBaseURL:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;https://api.domain.com/v2d&amp;#34;&lt;/span&gt;];&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Note that change base URL while app is running may bring some side effects. See &lt;a href=&#34;http://restkit.org/api/0.9/Classes/RKClient.html#//api/name/baseURL&#34;&gt;the API document&lt;/a&gt; for detail.&lt;/p&gt;&lt;p&gt;&lt;code&gt;RKClient&lt;/code&gt; acts just like a plain asynchronous HTTP client. You can send any HTTP request through its intuitive interface:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@interface&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;User&lt;/span&gt; : &lt;span style=&#34;color:#a6e22e&#34;&gt;NSObject&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;RKRequestDelegate&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@implementation&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;User&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- (&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;)&lt;span style=&#34;color:#a6e22e&#34;&gt;send&lt;/span&gt; {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// HTTP GET&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    [ [RKClient sharedClient] get:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;users/self&amp;#34;&lt;/span&gt; delegate:self];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// HTTP POST. Note the transparent NSDictionary conversion&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    NSDictionary&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; params &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        [NSDictionary dictionaryWithObjectsAndKeys:_userName, &lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;userName&amp;#34;&lt;/span&gt;, &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                                                   _password, &lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;password&amp;#34;&lt;/span&gt;, nil];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    [ [RKClient sharedClient] post:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;users/login&amp;#34;&lt;/span&gt; params:params delegate:self];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// HTTP DELETE&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    [ [RKClient sharedClient] delete:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;users/13&amp;#34;&lt;/span&gt; delegate:self];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// The delegate handles the response data when its fully loaded&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;- (&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;)&lt;span style=&#34;color:#a6e22e&#34;&gt;request:&lt;/span&gt;(RKRequest&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;)request &lt;span style=&#34;color:#a6e22e&#34;&gt;didLoadResponse:&lt;/span&gt;(RKResponse&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;)response {  &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ([request isGET]) {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ([response isOK]) {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            NSLog(&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;Data returned: %@&amp;#34;&lt;/span&gt;, [response bodyAsString]);&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ([request isPOST]) {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ([response isJSON]) {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            NSLog(&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;POST returned a JSON response&amp;#34;&lt;/span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ([request isDELETE]) {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ([response isNotFound]) {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            NSLog(&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;Resource &amp;#39;%@&amp;#39; not exists&amp;#34;&lt;/span&gt;, [request resourcePath]);&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;By using &lt;code&gt;RKObjectManager&lt;/code&gt; you&amp;rsquo;ll map the web resources to local Objective-C objects, so you need not (and cannot) handle the return data explicitly. Instead you should handle data through the mapping system, which will be discussed below.&lt;/p&gt;&lt;h2 id=&#34;modeling-and-mapping&#34;&gt;Modeling and Mapping&lt;/h2&gt;&lt;p&gt;Now the object mapping system. Let&amp;rsquo;s start with the best practice in RESTful API backed mobile app development:&lt;/p&gt;&lt;blockquote&gt;&lt;ol&gt;&lt;li&gt;Analyze the business and make abstraction.&lt;/li&gt;&lt;li&gt;Design the RESTful API spec based on the first step, including all call endpoints, parameters and returning data in JSON format.&lt;/li&gt;&lt;li&gt;Mapping the API spec to native code in designated mobile platform.&lt;/li&gt;&lt;/ol&gt;&lt;/blockquote&gt;&lt;p&gt;Assuming we have a simple API named &lt;code&gt;users/login&lt;/code&gt;, accepting POST request with 2 parameters: &lt;code&gt;username&lt;/code&gt; and &lt;code&gt;password&lt;/code&gt;, doing login check, and returning a encrypted access &lt;code&gt;token&lt;/code&gt; and corresponding &lt;code&gt;user&lt;/code&gt; object. And as a global convention we encapsulate the payload as &lt;code&gt;response&lt;/code&gt; section in a JSON string which also contains a &lt;code&gt;meta&lt;/code&gt; section for system level info such as status code and error message. So here it looks like:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;meta&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;code&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    },&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;response&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;token&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;931240153764834717 156605143238420655&amp;#34;&lt;/span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;user&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;user_name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;soulhacker&amp;#34;&lt;/span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;...&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;It&amp;rsquo;s simple but not trivial, and very &lt;em&gt;representative&lt;/em&gt;. What will the mapping work? Have a look at the code first:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;27&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;28&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;29&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;30&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;31&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;32&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;33&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;34&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;36&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;37&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;38&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;39&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;40&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;41&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;42&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;43&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;44&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;45&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;46&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;47&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;48&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;49&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;50&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;51&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;52&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;54&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;55&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;56&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;57&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;58&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;59&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;60&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;61&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;62&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;63&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;64&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;65&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;66&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;67&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;68&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;69&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;70&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;71&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;72&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;73&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;74&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;75&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;76&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;77&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;78&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;79&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;80&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#pragma Mark - Class Meta&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@interface&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Meta&lt;/span&gt; : &lt;span style=&#34;color:#a6e22e&#34;&gt;NSObject&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@property&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;readonly&lt;/span&gt;) NSString &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;code;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@end&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@implementation&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Meta&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@synthesize&lt;/span&gt; code &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; _code;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@end&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#pragma Mark - Class User&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@interface&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;User&lt;/span&gt; : &lt;span style=&#34;color:#a6e22e&#34;&gt;NSObject&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@property&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;readonly&lt;/span&gt;) NSString &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;userName;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Many stuff omitted here&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@end&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@implementation&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;User&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@synthesize&lt;/span&gt; userName &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; _userName;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Many stuff omitted here&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@end&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#pragma Mark - Class UsersLogin&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@interface&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UsersLogin&lt;/span&gt; : &lt;span style=&#34;color:#a6e22e&#34;&gt;NSObject&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@property&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;readonly&lt;/span&gt;) Meta &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;meta;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@property&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;readonly&lt;/span&gt;) NSString &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;token;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@property&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;readonly&lt;/span&gt;) User &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;user;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@end&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@implementation&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UsersLogin&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@synthesize&lt;/span&gt; meta &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; _meta;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@synthesize&lt;/span&gt; token &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; _token;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@synthesize&lt;/span&gt; user &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; _user;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@end&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#pragma Mark - Class UsersLoginRequest&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@interface&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UsersLoginRequest&lt;/span&gt; : &lt;span style=&#34;color:#a6e22e&#34;&gt;NSObject&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;RKObjectLoaderDelegate&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@property&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;nonatomic&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;retain&lt;/span&gt;) NSString &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;userName;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@property&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;nonatomic&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;retain&lt;/span&gt;) NSString &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;password;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- (UsersLoginRequest &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;)&lt;span style=&#34;color:#a6e22e&#34;&gt;initWithUserName:&lt;/span&gt;(NSString &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;)userName &lt;span style=&#34;color:#a6e22e&#34;&gt;password:&lt;/span&gt;(NSString &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;)password;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- (&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;)&lt;span style=&#34;color:#a6e22e&#34;&gt;login&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@end&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@implementation&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UsersLoginRequest&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Even more stuff omitted here&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- (&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;)&lt;span style=&#34;color:#a6e22e&#34;&gt;login&lt;/span&gt; {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    RKObjectMapping &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;metaMapping &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [RKObjectMapping mappingForClass:[Meta &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt;]];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    [metaMapping mapAttributes:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;code&amp;#34;&lt;/span&gt;, nil];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    RKObjectMapping &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;userMapping &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [RKObjectMapping mappingForClass:[User &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt;]];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    [userMapping mapKeyPath:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;user_name&amp;#34;&lt;/span&gt; toAttribute:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;userName&amp;#34;&lt;/span&gt;];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// More mapping for userMapping&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    RKObjectMapping &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;mapping &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [RKObjectMapping mappingForClass:[UsersLogin &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt;]];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    [mapping mapKeyPath:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;response.token&amp;#34;&lt;/span&gt; toAttribute:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;token&amp;#34;&lt;/span&gt;];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    [mapping mapKeyPath:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;meta&amp;#34;&lt;/span&gt; toRelationship:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;meta&amp;#34;&lt;/span&gt; withMapping:metaMapping];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    [mapping mapKeyPath:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;user&amp;#34;&lt;/span&gt; toRelationship:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;user&amp;#34;&lt;/span&gt; withMapping:userMapping];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Make the call&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    NSDictionary&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; params &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [NSDictionary dictionaryWithObjectsAndKeys:_userName, &lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;userName&amp;#34;&lt;/span&gt;, _password, &lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;password&amp;#34;&lt;/span&gt;, nil];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    NSString &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;endpoint &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;users/login?&amp;#34;&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    NSString &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;resourcePath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [endpoint stringByAppendingString:[params queryString]];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    [[RKObjectManager sharedManager] loadObjectsAtResourcePath:resourcePath objectMapping:mapping delegate:self];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#pragma Mark - RKObjectLoaderDelegate&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- (&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;)&lt;span style=&#34;color:#a6e22e&#34;&gt;objectLoader:&lt;/span&gt;(RKObjectLoader &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;)objectLoader &lt;span style=&#34;color:#a6e22e&#34;&gt;didLoadObjects:&lt;/span&gt;(NSArray &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;)objects {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    UsersLogin &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;result &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [objects objectAtIndex:&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    NSLog(&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;Response code=%@, token=[%@], userName=[%@]&amp;#34;&lt;/span&gt;, [[result meta] code], [result token], [[result user] userName]);&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- (&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;)&lt;span style=&#34;color:#a6e22e&#34;&gt;objectLoader:&lt;/span&gt;(RKObjectLoader &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;)objectLoader &lt;span style=&#34;color:#a6e22e&#34;&gt;didFailWithError:&lt;/span&gt;(NSError &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;)error {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    NSLog(&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;Error!&amp;#34;&lt;/span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Line 1-35&lt;/strong&gt;. Firstly we defined all needed model classes: fundamental ones first, ones that contain them next. Just follow the nature of the data structure within the API&amp;rsquo;s response data.&lt;br&gt;&lt;strong&gt;Line 51-56&lt;/strong&gt;. Use instances of &lt;code&gt;RKObjectMapping&lt;/code&gt; class to define object mappings. Simple mappings are self explained. Note that &lt;code&gt;RKObjectMapping&lt;/code&gt; provides several different &lt;code&gt;mapXXX&lt;/code&gt; methods to suit different use cases. The key path in mapping definition fully follows Cocoa&amp;rsquo;s key path style (also support &lt;a href=&#34;http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/CollectionOperators.html&#34;&gt;collection operators&lt;/a&gt;). Check &lt;a href=&#34;http://restkit.org/api/master/Classes/RKObjectManager.html&#34;&gt;its document&lt;/a&gt; and Apple&amp;rsquo;s &lt;a href=&#34;http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/KeyValueCoding.html&#34;&gt;Key Value Coding Guide&lt;/a&gt; for detail.&lt;br&gt;&lt;strong&gt;Line 58-61&lt;/strong&gt;. Complex object mappings are defined by &lt;code&gt;mapKeyPath:toRelationship:withMapping:&lt;/code&gt; or similar methods. They map some key path to pre-defined object mappings. As seen in the code, the mapping to class &lt;code&gt;UsersLogin&lt;/code&gt; contains simple mapping (&lt;em&gt;line 59&lt;/em&gt;) and relationship mappings (&lt;em&gt;line 60-61&lt;/em&gt;).&lt;br&gt;&lt;strong&gt;Line 64-67&lt;/strong&gt;. &lt;code&gt;RKObjectManager&lt;/code&gt; provides &lt;code&gt;loadObjectsAtResourcePath:objectMapping:delegate:&lt;/code&gt; method to do these steps in order: combine resource path with the global &lt;code&gt;BaseURL&lt;/code&gt; (configured within the &lt;code&gt;RKObjectManager&lt;/code&gt; singleton), load resource from web services, parse return data, transform to local objects according to pre-defined &lt;code&gt;RKObjectMapping&lt;/code&gt; instance, at last call the delegate to handle result.&lt;br&gt;&lt;strong&gt;Line 72-80&lt;/strong&gt;. Delegate methods &lt;code&gt;didLoadObjects&lt;/code&gt; and &lt;code&gt;didFailWithError&lt;/code&gt; (&lt;em&gt;required&lt;/em&gt;) are called after the object mapping process. Normally fetch the result object and do whatever you want.&lt;/p&gt;&lt;h2 id=&#34;routing&#34;&gt;Routing&lt;/h2&gt;&lt;p&gt;The previous code list is neat except one part. Note &lt;strong&gt;line 64-66&lt;/strong&gt;, in which we hard-code the API endpoint and parameters. In our &lt;code&gt;login&lt;/code&gt; scenario it may not be a big problem, but for highly reused objects, repeatedly constructing &lt;code&gt;GET&lt;/code&gt; &lt;code&gt;POST&lt;/code&gt; &lt;code&gt;PUT&lt;/code&gt; &lt;code&gt;DELETE&lt;/code&gt; URLs by hand could be real pain in the ass. How about more object-oriented and more elegant way, just like the &lt;a href=&#34;http://guides.rubyonrails.org/routing.html&#34;&gt;routing system in Ruby on Rails&lt;/a&gt;?&lt;/p&gt;&lt;p&gt;RestKit is most suitable for developers who has RoR background because of its &lt;strong&gt;Routing&lt;/strong&gt; system which is highly alike to RoR&amp;rsquo;s, but built on Cocoa&amp;rsquo;s idiomatic key-value coding way. Here is the code sample:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13&lt;/span&gt;&lt;span style=&#34;white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// The router belongs to the object manager, just as mappers&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;RKObjectRouter &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;router &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [[RKObjectManager sharedManager] router];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;[router routeClass:[User &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt;] toResourcePath:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;/users/:id&amp;#34;&lt;/span&gt;];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;[router routeClass:[User &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt;] toResourcePath:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;/users&amp;#34;&lt;/span&gt; forMethod:RKRequestMethodPOST];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Then we can call the GET POST PUT DELETE verbs directly from object manager&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;User &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;me &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [[User alloc] init];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;me.userName &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;soulhacker&amp;#34;&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;[[RKObjectManager sharedManager] postObject:me delegate:self];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;User &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;sb2nuke &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [[User alloc] init];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sb2nuke.&lt;span style=&#34;color:#66d9ef&#34;&gt;id&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [NSNumber numberWithInt:&lt;span style=&#34;color:#ae81ff&#34;&gt;13&lt;/span&gt;];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;[[RKObjectManager sharedManager] deleteObject:sb2nuke delegate:self];&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Line 4&lt;/strong&gt; set the &lt;em&gt;default&lt;/em&gt; route of &lt;code&gt;User&lt;/code&gt; class, which means when you call object manager&amp;rsquo;s &lt;code&gt;getObject&lt;/code&gt; &lt;code&gt;postObject&lt;/code&gt; &lt;code&gt;putObject&lt;/code&gt; &lt;code&gt;deleteObject&lt;/code&gt; methods the requests will go to &lt;code&gt;@&amp;quot;/users/:id&amp;quot;&lt;/code&gt;. This is a colon coded endpoint and what is after the colon is the name of a &lt;em&gt;method&lt;/em&gt; in the route class, whose return value will replace the colon part.&lt;br&gt;&lt;strong&gt;Line 5&lt;/strong&gt; set a special route for &lt;code&gt;postObject&lt;/code&gt; method, which will override the setting in default route.&lt;br&gt;&lt;strong&gt;Line 10&lt;/strong&gt; requests &lt;code&gt;@&amp;quot;/users&amp;quot;&lt;/code&gt; with HTTP &lt;code&gt;POST&lt;/code&gt; method and RestKit will transform &lt;code&gt;me&lt;/code&gt; object into post data form as the way defined in object mapper of class User.&lt;br&gt;&lt;strong&gt;Line 14&lt;/strong&gt; first call &lt;code&gt;[sb2nuke id]&lt;/code&gt; method to get the value and replace &lt;code&gt;:id&lt;/code&gt; with it, then requests &lt;code&gt;@&amp;quot;/users/13&amp;quot;&lt;/code&gt; with HTTP &lt;code&gt;DELETE&lt;/code&gt; method, which (should) remove the user object with id 13 from the server.&lt;/p&gt;&lt;p&gt;So you see, RestKit provides very flexible tools for RESTful web services integration: you can use the network layer and do all data mapping by hand, or you can use the object mapping to do it completely within local object system, or you can tuning it in some intermediate way. No matter which solution you choose remember to align the protocol between the server and client side, and don&amp;rsquo;t forget to verify them to the Android platform if necessary (there is no RestKit over there for now -_-).&lt;/p&gt;&lt;p&gt;Thus we&amp;rsquo;ve completed the first part of this introduction guide. Below we will discuss some facilities bundled in RestKit to make our life better.&lt;/p&gt;&lt;h2 id=&#34;the-request-queue&#34;&gt;The Request Queue&lt;/h2&gt;&lt;p&gt;Request queue is the most important support player under the hood. &lt;code&gt;RKRequestQueue&lt;/code&gt; is behind nearly all network access within RestKit and provides elegant solution for critical memory and bandwidth problems. &lt;code&gt;RKRequestQueue&lt;/code&gt; wraps memory management within RestKit framework so you&amp;rsquo;ll never see any &lt;code&gt;retain&lt;/code&gt; &lt;code&gt;release&lt;/code&gt; &lt;code&gt;autorelease&lt;/code&gt; for &lt;code&gt;RKRequest&lt;/code&gt; &lt;code&gt;RKResponse&lt;/code&gt; instances. It let us developers focus on the business with very little concern about the memory management.&lt;/p&gt;&lt;p&gt;&lt;code&gt;RKRequestQueue&lt;/code&gt; also provides seamless integration with Reachability API (in iOS System Configuration framework), pooling all requests when network is unavailable, and limiting concurrent requests when network becomes reachable to prevent overburden as well.&lt;/p&gt;&lt;p&gt;All the amazing features described above are working without knowing, and maybe the only visible part of &lt;code&gt;RKRequestQueue&lt;/code&gt; is its &lt;em&gt;request lifecycle management&lt;/em&gt; feature, by which you can cancel ongoing requests to prevent wasting the bandwidth. This is a common situation in mobile apps that when some user action generates a bunch of network requests and the following action actually makes those requests useless (e.g. the view for previous action is dismissed by the later action). By using &lt;code&gt;RKRequestQueue&lt;/code&gt; we can do it very easily by its &lt;code&gt;cancelRequest:&lt;/code&gt; &lt;code&gt;cancelRequestsWithDelegate:&lt;/code&gt; and  cancelAllRequests:` methods. And remember that whether and when to call them is fully determined by developers so you can choose the strategy wisely according to the different scenarios. Here is the simplest sample:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- (&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;)&lt;span style=&#34;color:#a6e22e&#34;&gt;viewWillAppear:&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;BOOL&lt;/span&gt;)animated {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    [RKClient sharedClient] get:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;users/self&amp;#34;&lt;/span&gt; delegate:self];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- (&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;)&lt;span style=&#34;color:#a6e22e&#34;&gt;viewWillDisappear:&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;BOOL&lt;/span&gt;)animated {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    [[RKRequestQueue sharedQueue] cancelRequestsWithDelegate:self];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The &lt;code&gt;cancelRequestsWithDelegate:&lt;/code&gt; method cancel all requests that current controller is delegate for. If there are no one processing it&amp;rsquo;ll do nothing.&lt;/p&gt;&lt;p&gt;The last but not least. What &lt;code&gt;[RKRequestQueue sharedQueue]&lt;/code&gt; returns is the default queue which created automatically when the RestKit client initialized. In most real world apps it&amp;rsquo;s not enough. For example we may need a queue to handle special resource intensive tasks in a background thread, such as data uploading/downloading, while the default queue keep working for  responding user actions. It&amp;rsquo;s easy:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;RKRequestQueue&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; queue &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [[RKRequestQueue alloc] init];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;queue.delegate &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; self;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;queue.concurrentRequestsLimit &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;queue.showsNetworkActivityIndicatorWhenBusy &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; YES;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Add some requests to it and make it start&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;[queue addRequest:[&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    [RKClient sharedClient] requestWithResourcePath:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;users/1&amp;#34;&lt;/span&gt; delegate:self]];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;[queue addRequest:[&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    [RKClient sharedClient] requestWithResourcePath:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;users/2&amp;#34;&lt;/span&gt; delegate:self]];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;[queue addRequest:[&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    [RKClient sharedClient] requestWithResourcePath:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;users/3&amp;#34;&lt;/span&gt; delegate:self]];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;[queue start];&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;reachability&#34;&gt;Reachability&lt;/h2&gt;&lt;p&gt;Reachability is the problem all mobile apps have to face and of course iOS provides solution for that, well, sort of. The problem is: &lt;code&gt;SCNetworkReachability&lt;/code&gt; (in &lt;code&gt;SystemConfiguration&lt;/code&gt; framework) is implemented as low level C APIs and not so easy to use. Fortunately RestKit is bundled with a very straight-forward Objective-C wrapper for that, the &lt;code&gt;RKReachabilityObserver&lt;/code&gt;.&lt;/p&gt;&lt;p&gt;When RKClient (or RKObjectManager) is initialized with some base URL, RestKit automatically initializes an instance of RKReachabilityObserver targeted at the host specified in the base URL and can be accessed via &lt;code&gt;baseURLReachabilityObserver&lt;/code&gt; property. This observer also automatically registers &lt;code&gt;RKReachabilityStateChangedNotification&lt;/code&gt; events in the default notification center. So in most cases we can use it in very simple way:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- (&lt;span style=&#34;color:#66d9ef&#34;&gt;id&lt;/span&gt;)&lt;span style=&#34;color:#a6e22e&#34;&gt;init&lt;/span&gt; {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ((self &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [super init])) {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        [[NSNotificationCenter defaultCenter] addObserver:self &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            selector:&lt;span style=&#34;color:#66d9ef&#34;&gt;@selector&lt;/span&gt;(reachabilityChanged:) &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            name:RKReachabilityStateChangedNotification &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            object:nil];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; self;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- (&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;)&lt;span style=&#34;color:#a6e22e&#34;&gt;reachabilityChanged:&lt;/span&gt;(NSNotification&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;)notification {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    RKReachabilityObserver &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;observer &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (RKReachabilityObserver &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;)[notification object];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ([observer isNetworkAvailable]) {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        NSLog(&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;We&amp;#39;re online!&amp;#34;&lt;/span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (RKReachabilityReachableViaWiFi &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; [observer networkStatus]) {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            NSLog(&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;…via WiFi.&amp;#34;&lt;/span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (RKReachabilityReachableViaWWAN &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; [observer networkStatus]) {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            NSLog(&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;…via mobile network.&amp;#34;&lt;/span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ([observer isConnectionRequired]) {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        NSLog(&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;Mobile network may be available if we open a connection...&amp;#34;&lt;/span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    } &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        NSLog(&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;We&amp;#39;re offline!&amp;#34;&lt;/span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;sending-multi-part-data&#34;&gt;Sending Multi-part Data&lt;/h2&gt;&lt;p&gt;Sending multi-part data through HTTP requests is very common requirement and incredibly difficult in most programming languages. RestKit uses &lt;code&gt;RKParams&lt;/code&gt; and &lt;code&gt;RKParamsAttachment&lt;/code&gt; to handle that problem. &lt;code&gt;RKParams&lt;/code&gt; is the container that can hold any kinds of parameters. For simple data type it works just like a NSDictionary, and for multi-part data it can wrap &lt;code&gt;NSData&lt;/code&gt; and/or &lt;code&gt;RKParamsAttachment&lt;/code&gt; objects. Both &lt;code&gt;RKParams&lt;/code&gt; and &lt;code&gt;RKParamsAttachment&lt;/code&gt; are MIME type friendly. The following self-explained code sample shows all:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;NSString&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; filePath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;/path/to/avatar.jpg&amp;#34;&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;RKParams&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; params &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [RKParams params];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;[params setValue:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;Neo&amp;#34;&lt;/span&gt; forParam:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;name&amp;#34;&lt;/span&gt;];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;[params setValue:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;soulhacker@matrix.net&amp;#34;&lt;/span&gt; forParam:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;email&amp;#34;&lt;/span&gt;];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;RKParamsAttachment&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; attachment &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [params setFile:filePath forParam:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;avatar&amp;#34;&lt;/span&gt;];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;attachment.MIMEType &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;image/jpeg&amp;#34;&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;attachment.fileName &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;avatar.jpg&amp;#34;&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;UIImage&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; image &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [UIImage imageNamed:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;wallpaper.png&amp;#34;&lt;/span&gt;];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;NSData&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; imageData &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; UIImagePNGRepresentation(image);&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;[params setData:imageData MIMEType:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;image/png&amp;#34;&lt;/span&gt; forParam:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;wallpaper&amp;#34;&lt;/span&gt;];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;NSLog(&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;ContentType = %@, ContentLength = %@&amp;#34;&lt;/span&gt;, &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    [params HTTPHeaderValueForContentType],&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    [params HTTPHeaderValueForContentLength]);&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Send a Request!&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;[[RKClient sharedClient] post:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;/upload&amp;#34;&lt;/span&gt; params:params delegate:self];&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;background-uploaddownload&#34;&gt;Background Upload/Download&lt;/h2&gt;&lt;p&gt;iOS supported multi-tasking since 4.0 but it&amp;rsquo;s a highly restricted support and there are so many misconceptions among the users and even developers. I would strongly suggest Fraser Speirs&amp;rsquo; &lt;a href=&#34;http://speirs.org/blog/2012/1/2/misconceptions-about-ios-multitasking.html&#34;&gt;excellent blog&lt;/a&gt; which explains all about iOS multi-tasking.&lt;/p&gt;&lt;p&gt;RestKit can seamlessly facilitate multi-tasking to prevent important long-time requests being interrupted by user switching out of the app. The key is the &lt;code&gt;backgroundPolicy&lt;/code&gt; property of &lt;code&gt;RKRequest&lt;/code&gt; which can be one of 4 enum values:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;RKRequestBackgroundPolicyNone&lt;/code&gt;: the default value, do nothing for backgrounding;&lt;/li&gt;&lt;li&gt;&lt;code&gt;RKRequestBackgroundPolicyCancel&lt;/code&gt;: cancel the request when app switches to background;&lt;/li&gt;&lt;li&gt;&lt;code&gt;RKRequestBackgroundPolicyContinue&lt;/code&gt;: continue the request in background;&lt;/li&gt;&lt;li&gt;&lt;code&gt;RKRequestBackgroundPolicyRequeue&lt;/code&gt;: place the request back to the queue for next activation.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;So to make a request continue to work in background, just set its &lt;code&gt;backgroundPolicy&lt;/code&gt; property as below:&lt;/p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;RKRequest&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; request &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [[RKClient sharedClient] post:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;/upload&amp;#34;&lt;/span&gt; delegate:self];&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;request.backgroundPolicy &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; RKRequestBackgroundPolicyContinue;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt;&lt;p&gt;RestKit is a clean and elegant solution for iOS app to interact with RESTful web services. It encapsulates many everyday work into a tiny yet powerful framework and extremely easy to use. Suggest every iOS developers to give it a try.&lt;/p&gt;&lt;h2 id=&#34;references&#34;&gt;References&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&#34;http://restkit.org/api/master/&#34;&gt;RestKit References (master branch)&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&#34;https://github.com/RestKit/RestKit/wiki/Tutorial-%3A-Introduction-to-RestKit&#34;&gt;Tutorial: Introduction to RestKit&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&#34;http://mobile.tutsplus.com/tutorials/iphone/advanced-restkit-development_iphone-sdk/&#34;&gt;Advanced RestKit Development&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&#34;https://github.com/RestKit/RestKit/wiki/Solution-Recipes&#34;&gt;RestKit Solution Recipes&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;&lt;hr&gt;&lt;ol&gt;&lt;li id=&#34;fn:1&#34;&gt;&lt;p&gt;In fact ASIHTTPRequest has been &lt;a href=&#34;http://allseeing-i.com/%5Brequest_release%5D&#34;&gt;abandoned&lt;/a&gt; since September 2011, and RestKit is one of replacements its author suggested.&amp;#160;&lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li id=&#34;fn:2&#34;&gt;&lt;p&gt;The JSON parsing layer is pluggable, default to &lt;a href=&#34;https://github.com/johnezang/JSONKit&#34;&gt;JSONKit&lt;/a&gt;. And I haven&amp;rsquo;t mentioned the &lt;em&gt;old&lt;/em&gt; XML, have I?&amp;#160;&lt;a href=&#34;#fnref:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li id=&#34;fn:3&#34;&gt;&lt;p&gt;Created by &lt;a href=&#34;mailto:jverkoey@gmail.com&#34;&gt;Jeff Verkoeyen&lt;/a&gt;, the author of &lt;a href=&#34;https://github.com/jverkoey/nimbus&#34;&gt;Nimbus&lt;/a&gt;, the highly improved successor of Facebook&amp;rsquo;s Three20.&amp;#160;&lt;a href=&#34;#fnref:3&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;</description>
     </item>
   
     <item>
       <title>Back-end is Hard</title>
       <link>/posts/back-end-is-hard/</link>
       <pubDate>Sat, 24 Dec 2011 20:07:00 +0800</pubDate>
       
       <guid>/posts/back-end-is-hard/</guid>
       <description>&lt;p&gt;Some of of my colleagues are talking about the difficulties of web front-end developing: the &lt;a href=&#34;http://browsershots.org/&#34;&gt;browser compatibility&lt;/a&gt;, the &lt;a href=&#34;https://twitter.com/soulhacker/status/145344139251286016&#34;&gt;infuriatingly awful JavaScript language&lt;/a&gt;, the pain when glueing DOM, CSS and JavaScript, and so on.&lt;/p&gt;&lt;p&gt;I agree that all these are a pain in the ass. But they are NOTHING compared to back-end architecture. During my over 10 years career as a software architect, I’ve seen significant improvements in nearly every parts of back-end architecture but it’s still very hard. The fundamental difficulties are still there, nearly unchanged all the time. Let me list some of the major ones.&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;Design for failure.&lt;/strong&gt; Nearly half of the back-end code are not for ‘common’ situation. They are &lt;a href=&#34;http://www.usenix.org/event/lisa07/tech/full_papers/hamilton/hamilton_html/&#34;&gt;designed for failures&lt;/a&gt;. They are designed for letting the system provide acceptable response under special or extreme conditions (and within specific budget): too many concurrent requests, the memory runs out, a new node is being hot-plugged in to the system, the load balancing device stops working, the long connection breaks every several minutes for no reason, etc. To maintain such functionality the design should contain many compromises: sync or async? Scale out or scale up? Realtime transaction or batch job? etc. All these tradeoffs cannot be determined through any simple rules and must be considered via all aspects of environment and requirements of a dynamic system. It nearly always leads to some kind of mistakes.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;Architecture is about abstraction.&lt;/strong&gt; Why abstract? Because abstract concept/mechanism/pattern/methodology provide far more flexibility and reusability. The progress of abstraction distills the essence of the problem and wrap it as reusable component which can be used to solve similar problems in completely different system/context. Seems beautiful isn’t it? But unfortunately, abstraction is hard. More unfortunately, inappropriate abstraction is incredibly disastrous. And the most unfortunately, we have very few working methodology to do abstraction. Abstraction is a kind of art, remember? Mostly we begin with several general models, walk through a series of key rules and continually test our design for the lifetime of the system. Very experience based. In many cases when we find an architectural mistake it is too late. All we can do is to choose from the options between rebuilding the system from ground up or doing the yucky patchwork until we are exhausted.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;Architecture IS product.&lt;/strong&gt; A software product contains many different point of views. Two of the most important are the end-user point of view and the architecture point of view. The end-user POV is like a black box, described by system input and output, can be (relatively) precisely defined and tested. The architecture POV is from inside the software system, the blueprint of the system as a whole, mainly describes each of every parts of the system and the connections between them. In most cases there is no direct link between these POVs. So those are very different POVs but they belong to the SAME product. They must be kept aligned and consistent. So the architect must deeply understand the soul of the product and the product designer must know the capability and limit of the architecture. Otherwise (i.e. the common situations), either the architecture has to be changed tremendously to meet some normal new product feature request, or after implementing a high cost product feature it appears that this feature can be replaced by another easy one which can bring the end-user nearly the same value and experience.&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;Well, there are more but that’s enough. I consider all the above are the ‘essential difficulties’ as defined by Frederick Brooks in his epic &lt;a href=&#34;http://www.cs.nott.ac.uk/~cah/G51ISS/Documents/NoSilverBullet.html&#34;&gt;&lt;em&gt;No Silver Bullet&lt;/em&gt;&lt;/a&gt;, which means no quick solver in the coming future.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Back-end is hard. Q.E.D.&lt;/strong&gt;&lt;/p&gt;</description>
     </item>
   
     <item>
       <title>7-inch Success</title>
       <link>/posts/7-inch-success/</link>
       <pubDate>Sat, 03 Dec 2011 16:59:00 +0800</pubDate>
       
       <guid>/posts/7-inch-success/</guid>
       <description>&lt;figure&gt;&lt;img src=&#34;/images/posts/7-inch-success.jpg&#34;/&gt;&lt;figcaption&gt;            &lt;h4&gt;Kindle Fire&lt;/h4&gt;        &lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;Kevin, my friend and colleague, just came back from USA, bringing a Kindle Fire with him. I tried it for an hour or two, and finally it confirms my earlier thought: this whole new Kindle, together with the strategy behind it, will gain its own success, and push the post-PC era, which is started by Apple, forward to a new stage.&lt;/p&gt;&lt;p&gt;The device feels overall very solid and comfortable, except it’s a bit heavier than I expected. But you cannot expect a full function 7-inch pad weighs as light as a 6-inch e-ink device, right? And it’s still 1/3 lighter than iPad 2. The 1024 x 600, 7″ display is clear and sharp, the reading experience is as good as on my old Kindle 3, except the weight again. Amazon Appstore provides many Android apps and games which can run smoothly on Kindle Fire, though not so many as Apple’s. The experience of apps are varied, generally OK. And especially, the Kindle Silk browser is just OK, providing no noticeable browsing speed improvement even at USA, as Kevin told me.&lt;/p&gt;&lt;p&gt;So it is just-another-failed-Android-pad? Absolutely no. We all have read a lot of good-but-not-so-great reviews about Kindle Fire (e.g. &lt;a href=&#34;http://www.marco.org/2011/11/17/kindle-fire-review&#34;&gt;this&lt;/a&gt;, and &lt;a href=&#34;http://online.wsj.com/article/SB10001424052970204190504577040110511886588.html&#34;&gt;this&lt;/a&gt;), but they are mostly originated from technical people. It’s 100 percent truth that the first edition of Kindle Fire is far from flawless, but the most important thing is that for a common user Kindle Fire is so easy to use, not only much simpler than all the available Android pads, even simpler than iPad. Kevin bought it a week ago, and his iPad 2′s usage dropped 80% after that. It’s easier to use and lighter to hold. We listed the best scenarios for Kindle Fire: video, music, gaming and reading. For these scenarios, Kindle Fire ‘just works’. What Kindle Fire is really lack of, compared to iPad, are high quality professional apps such as iWork, OmniGraffle, iTeleport, Prompt, Brushes and so on. But tell me how many times and how long have you used them, even if they stay in your iPad for a long long time.&lt;/p&gt;&lt;p&gt;Remember when Steve Jobs introduced iPad for the first time, he picked up some scenarios (looking photos, watching videos, handling emails, etc.) and told us iPad can do these things far better than a smartphone or a laptop computer. Pads are devices between handheld devices and laptop computers, they fit some scenarios and only fit them. Now Amazon goes even further, they just focus on a few of these scenarios, the requirements from all people, the entertainment requirements, and put them into a more compact, lighter and easier to use device. That’s Kindle Fire.&lt;/p&gt;&lt;p&gt;One big part of entertainment requirements is gaming. iPhone/iPod Touch/iPad are very good gaming platforms, and there are so many excellent games in Apple’s AppStore: addictive casual games, innovative games facilitated by the multi-touch control and movement sensors, popular console games’ special edition, and many others. They cover the most part of time people use iDevices. For now Amazon’s Appstore cannot compare to his rival, but Kindle Fire has already show the potential as a gaming platform. When you hold it in landscape mode, it just acts like a little bigger PSP, the feel is very cool (see the 3rd photo above).&lt;/p&gt;&lt;p&gt;As reported by &lt;a href=&#34;http://techcrunch.com/2011/12/02/kindle-fire-3-9-million/&#34;&gt;TechCrunch&lt;/a&gt;, Amazon will ship 3.9 million Kindle Fires this holiday quarter. As comparison, Apple sold 3.3 million iPad in the September quarter of 2010 and 7.3 million in the holiday quarter last year. Remember Kindle Fire is in a completely different size and price space from iPad which leads to a market not so crowded. If We see some notable sales growth of Kindle Fire, there’ll be no surprise. A reasonable prediction is, Kindle Fire will highly likely be the leader of all Android pads and gain more attention from app and content providers, especially the ones provide high quality contents.&lt;/p&gt;&lt;p&gt;Here comes the real point. I think that even without all the apps and games and third party contents, Amazon still can make Kindle Fire an epic success. It’s Amazon Prime service. At its earlier years, Amazon Prime was just a customer service plan focused on better delivery, by which Amazon promises to deliver any goods you ordered to you within 2 days. Some may say that 360buy and 51buy do a lot better and they can deliver goods 3 times a day and make the time frame less than several hours. But Amazon Prime is for North American people. The physical distribution cost is pretty much higher and to fulfill the 2-day promise is not so easy. So the Amazon Prime becomes the most popular paid service in America. Now Amazon Prime is changing. It provides unlimited streaming of music, movies and TV shows, right to your Kindle Fire. With the launch of Kindle Fire Amazon also opened an online library which let Prime members ‘borrow’ any books in it without extra cost. What you can borrow is limited for now, but we can bet on its progressively expansion. Apart from Amazon Prime, Amazon Appstore also provides a special bonus for Kindle Fire user: everyday Amazon picks up a popular paid app and give it to all Kindle Fire user for free! Finally, Kindle Fire bundles with a one month trial of Prime service, wondering how many people can resist the temptation to go on.&lt;/p&gt;&lt;p&gt;Isn’t it amazing? I think it’s amazing, at least for people in America. Most of the advantages Amazon holds are limited in North America. I’m imagining some big guy in China cloning Amazon’s business patterns, but it’s not so easy, not so easy indeed. Amazon’s business patterns depend on mass contents, excellent service, and good device. They require very powerful IT infrastructure and operation to run. They need long time working and accumulation.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;The Epilogue&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Now the light is on, our world’s strongest two fighters have both entered the ring. They are both A-initiated(please ignore this bad joke). The champion, on the left, the most valuable tech company, the most popular tech brand all around the world, the flag of the Post-PC Era, exclusive skills include: Perfect Industrial Design, Ultimate User Experience Integration and Supply-chain Control plus Summon Infinite Cash Dragon, are preparing to prove that they can keep on moving from one victory to another even after his lifetime mentor passed away.&lt;/p&gt;&lt;p&gt;The challenger, on the right, the earliest and biggest e-commerce business, the best delivery and custom service provider in North America, bringing his powerful cloud infrastructure and uncountable contents, with his very powerful mentor who has the closest talents to the champion’s departed mentor, are chasing the champion’s weak point and looking for the chance to fulfill his own dream.&lt;/p&gt;&lt;p&gt;&lt;em&gt;Ready? Fight!&lt;/em&gt;&lt;/p&gt;</description>
     </item>
   
 </channel>
</rss>
